<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data Wrangling | Data-Scientific Programming Notes</title>
  <meta name="description" content="Chapter 2 Data Wrangling | Data-Scientific Programming Notes" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data Wrangling | Data-Scientific Programming Notes" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data Wrangling | Data-Scientific Programming Notes" />
  
  
  

<meta name="author" content="Andrew Sage" />


<meta name="date" content="2022-02-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-visualization.html"/>
<link rel="next" href="shiny-apps.html"/>
<script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data-Scientific Programming Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>1</b> Data Visualization</a><ul>
<li class="chapter" data-level="1.1" data-path="data-visualization.html"><a href="data-visualization.html#loading-and-exploring-data"><i class="fa fa-check"></i><b>1.1</b> Loading and Exploring Data</a><ul>
<li class="chapter" data-level="1.1.1" data-path="data-visualization.html"><a href="data-visualization.html#creating-graphics"><i class="fa fa-check"></i><b>1.1.1</b> Creating Graphics</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.1.1-basic-scatterplot"><i class="fa fa-check"></i>Example 1.1.1 Basic Scatterplot</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.1.2-scatterplot-with-text-labels"><i class="fa fa-check"></i>Example 1.1.2 Scatterplot with text labels</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.1.3-scatterplot-with-color-shape-and-size"><i class="fa fa-check"></i>Example 1.1.3 Scatterplot with color, shape, and size</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.1.4-changing-axis-labels-and-hiding-legend"><i class="fa fa-check"></i>Example 1.1.4 Changing Axis Labels and Hiding Legend</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.1.5"><i class="fa fa-check"></i>Practice 1.1.5</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-visualization.html"><a href="data-visualization.html#more-graphics"><i class="fa fa-check"></i><b>1.2</b> More Graphics</a><ul>
<li class="chapter" data-level="1.2.1" data-path="data-visualization.html"><a href="data-visualization.html#visualizing-quantitative-data-continued"><i class="fa fa-check"></i><b>1.2.1</b> Visualizing Quantitative Data (Continued)</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.1-faceting"><i class="fa fa-check"></i>Example 1.2.1: Faceting</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.2-histograms"><i class="fa fa-check"></i>Example 1.2.2: Histograms</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.3-boxplots"><i class="fa fa-check"></i>Example 1.2.3: Boxplots</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.2.4"><i class="fa fa-check"></i>Practice 1.2.4</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.2.5"><i class="fa fa-check"></i>Practice 1.2.5</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.2.6"><i class="fa fa-check"></i>Practice 1.2.6</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-visualization.html"><a href="data-visualization.html#visualizing-categorical-data"><i class="fa fa-check"></i><b>1.2.2</b> Visualizing Categorical Data</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.7-bar-graph"><i class="fa fa-check"></i>Example 1.2.7: Bar Graph</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.8-reordering-bars"><i class="fa fa-check"></i>Example 1.2.8 Reordering Bars</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.9-relative-frequency-bar-graph"><i class="fa fa-check"></i>Example 1.2.9 Relative Frequency Bar Graph</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.2.10"><i class="fa fa-check"></i>Practice 1.2.10</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.2.11"><i class="fa fa-check"></i>Practice 1.2.11</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.2.12"><i class="fa fa-check"></i>Practice 1.2.12</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.13-stacked-bar-graph"><i class="fa fa-check"></i>Example 1.2.13 Stacked Bar Graph</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.14-stacked-bar-graph-with-equal-heights"><i class="fa fa-check"></i>Example 1.2.14 Stacked Bar Graph with Equal Heights</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.15-side-by-side-bar-graph"><i class="fa fa-check"></i>Example 1.2.15 Side-by-Side Bar Graph</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.2.16-height-specified-by-variable"><i class="fa fa-check"></i>Example 1.2.16 Height Specified by Variable</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#practice-1.2.17-height-specified-by-variable"><i class="fa fa-check"></i>Practice 1.2.17 Height Specified by Variable</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="data-visualization.html"><a href="data-visualization.html#advanced-data-graphics"><i class="fa fa-check"></i><b>1.3</b> Advanced Data Graphics</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#babynames-dataset"><i class="fa fa-check"></i>Babynames dataset</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.3.1-age-distribution-for-a-given-name"><i class="fa fa-check"></i>Example 1.3.1: Age Distribution for a Given Name</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#choosing-name-and-gender"><i class="fa fa-check"></i>Choosing Name and Gender</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#setting-axis-limits"><i class="fa fa-check"></i>Setting Axis Limits</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#adding-line"><i class="fa fa-check"></i>Adding Line</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#axis-labels"><i class="fa fa-check"></i>Axis Labels</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#adding-text"><i class="fa fa-check"></i>Adding Text</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#adding-median-age"><i class="fa fa-check"></i>Adding Median Age</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#example-1.3.2-common-female-names"><i class="fa fa-check"></i>Example 1.3.2: Common Female Names</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#some-data-prep"><i class="fa fa-check"></i>Some data prep</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#setup-the-plot"><i class="fa fa-check"></i>Setup the Plot</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#add-linerange-and-color"><i class="fa fa-check"></i>Add Linerange and color</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#add-points-at-median"><i class="fa fa-check"></i>Add points at median</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#add-labels-and-flip-coordinates"><i class="fa fa-check"></i>Add Labels and Flip Coordinates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>2</b> Data Wrangling</a><ul>
<li class="chapter" data-level="2.1" data-path="data-wrangling.html"><a href="data-wrangling.html#filtering-and-arranging-data-and-selecting-columns"><i class="fa fa-check"></i><b>2.1</b> Filtering and Arranging Data, and Selecting Columns</a><ul>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.1.1"><i class="fa fa-check"></i>Example 2.1.1</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.1.2"><i class="fa fa-check"></i>Example 2.1.2</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.1.3"><i class="fa fa-check"></i>Example 2.1.3</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.1.4"><i class="fa fa-check"></i>Example 2.1.4</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.1.5"><i class="fa fa-check"></i>Example 2.1.5</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.1.6"><i class="fa fa-check"></i>Practice 2.1.6</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.1.7"><i class="fa fa-check"></i>Practice 2.1.7</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.1.8"><i class="fa fa-check"></i>Practice 2.1.8</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.1.9-multiple-logicals"><i class="fa fa-check"></i>Example 2.1.9 Multiple Logicals</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.1.10-dealing-with-nas"><i class="fa fa-check"></i>Example 2.1.10: Dealing with NA's</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.1.11"><i class="fa fa-check"></i>Practice 2.1.11</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.1.12"><i class="fa fa-check"></i>Practice 2.1.12</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-wrangling.html"><a href="data-wrangling.html#mutating-summarizing-and-grouping-data"><i class="fa fa-check"></i><b>2.2</b> Mutating, Summarizing, and Grouping Data</a><ul>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.2.1"><i class="fa fa-check"></i>Example 2.2.1</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.2.2"><i class="fa fa-check"></i>Example 2.2.2</a></li>
<li class="chapter" data-level="2.2.1" data-path="data-wrangling.html"><a href="data-wrangling.html#summarize"><i class="fa fa-check"></i><b>2.2.1</b> Summarize</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.2.3"><i class="fa fa-check"></i>Example 2.2.3</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.2.4"><i class="fa fa-check"></i>Practice 2.2.4</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.2.5"><i class="fa fa-check"></i>Practice 2.2.5</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.2.6"><i class="fa fa-check"></i>Example 2.2.6</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.2.7"><i class="fa fa-check"></i>Example 2.2.7</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.2.8"><i class="fa fa-check"></i>Example 2.2.8</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.2.9"><i class="fa fa-check"></i>Example 2.2.9</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.2.10"><i class="fa fa-check"></i>Practice 2.2.10</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.2.11"><i class="fa fa-check"></i>Practice 2.2.11</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.2.12"><i class="fa fa-check"></i>Practice 2.2.12</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.2.13"><i class="fa fa-check"></i>Practice 2.2.13</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-wrangling.html"><a href="data-wrangling.html#tidy-data"><i class="fa fa-check"></i><b>2.3</b> Tidy Data</a><ul>
<li><a href="data-wrangling.html#example-2.3.1-pivot_longer">Example 2.3.1: <code>pivot_longer()</code></a></li>
<li><a href="data-wrangling.html#example-2.3.2-pivot_wider">Example 2.3.2 <code>pivot_wider</code></a></li>
<li><a href="data-wrangling.html#example-2.3.3-separate-and-unite">Example 2.3.3 <code>separate()</code> and <code>unite()</code></a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.3.4"><i class="fa fa-check"></i>Practice 2.3.4</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.3.5"><i class="fa fa-check"></i>Practice 2.3.5</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.3.6"><i class="fa fa-check"></i>Practice 2.3.6</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-wrangling.html"><a href="data-wrangling.html#joining-data"><i class="fa fa-check"></i><b>2.4</b> Joining Data</a><ul>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#mutating-joins"><i class="fa fa-check"></i>Mutating Joins</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.4.1-joining-countries-and-continents"><i class="fa fa-check"></i>Example 2.4.1 Joining countries and continents</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.4.2"><i class="fa fa-check"></i>Practice 2.4.2</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#filtering-joins"><i class="fa fa-check"></i>Filtering Joins</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.4.3-joining-countries-and-continents"><i class="fa fa-check"></i>Example 2.4.3 Joining countries and continents</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.4.4"><i class="fa fa-check"></i>Practice 2.4.4</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-wrangling.html"><a href="data-wrangling.html#strings-factors-and-dates"><i class="fa fa-check"></i><b>2.5</b> Strings, Factors and Dates</a><ul>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.5.1-modifying-string-variables"><i class="fa fa-check"></i>Example 2.5.1: Modifying String Variables</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.5.2"><i class="fa fa-check"></i>Practice 2.5.2:</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.5.3-working-with-factor-variables"><i class="fa fa-check"></i>Example 2.5.3: Working with Factor Variables</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.5.5-dates-and-times"><i class="fa fa-check"></i>Example 2.5.5: Dates and Times</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-2.5.6"><i class="fa fa-check"></i>Practice 2.5.6</a></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html#example-2.5.7-creating-date-variable"><i class="fa fa-check"></i>Example 2.5.7 Creating Date Variable</a></li>
<li><a href="data-wrangling.html#example-2.5.8-today-and-now">Example 2.5.8 <code>today</code> and <code>now</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="shiny-apps.html"><a href="shiny-apps.html"><i class="fa fa-check"></i><b>3</b> Shiny Apps</a><ul>
<li class="chapter" data-level="3.1" data-path="shiny-apps.html"><a href="shiny-apps.html#introduction-to-shiny"><i class="fa fa-check"></i><b>3.1</b> Introduction to Shiny</a><ul>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#shiny-structure"><i class="fa fa-check"></i>Shiny Structure</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#shiny-app-template"><i class="fa fa-check"></i>Shiny App Template</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#example-3.1.1-geyser-app"><i class="fa fa-check"></i>Example 3.1.1: Geyser App</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#practice-3.1.2-weather-app."><i class="fa fa-check"></i>Practice 3.1.2: Weather App.</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#practice-3.1.3-lga-temperatures"><i class="fa fa-check"></i>Practice 3.1.3: LGA Temperatures</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#practice-3.1.4-scatterplot-of-temp-by-hour"><i class="fa fa-check"></i>Practice 3.1.4: Scatterplot of Temp by Hour</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="shiny-apps.html"><a href="shiny-apps.html#shiny-app-inputs"><i class="fa fa-check"></i><b>3.2</b> Shiny App Inputs</a><ul>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#example-3.2.1-weather-app"><i class="fa fa-check"></i>Example 3.2.1 Weather App</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#example-3.2.2-babynames-app"><i class="fa fa-check"></i>Example 3.2.2 Babynames App</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#practice-3.2.3-user-specified-month-and-airport."><i class="fa fa-check"></i>Practice 3.2.3: User Specified Month and Airport.</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#practice-3.2.4-user-specified-month-and-airport."><i class="fa fa-check"></i>Practice 3.2.4: User Specified Month and Airport.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="shiny-apps.html"><a href="shiny-apps.html#multiple-outputs"><i class="fa fa-check"></i><b>3.3</b> Multiple Outputs</a><ul>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#example-3.3.1-weather-app-with-reactive-expression"><i class="fa fa-check"></i>Example 3.3.1 Weather App with Reactive Expression</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#example-3.3.2-babynames-app-with-interactive-user-interface"><i class="fa fa-check"></i>Example 3.3.2 Babynames App with Interactive User Interface</a></li>
<li class="chapter" data-level="" data-path="shiny-apps.html"><a href="shiny-apps.html#practice-3.3.3"><i class="fa fa-check"></i>Practice 3.3.3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="webscraping.html"><a href="webscraping.html"><i class="fa fa-check"></i><b>4</b> Webscraping</a><ul>
<li class="chapter" data-level="4.1" data-path="webscraping.html"><a href="webscraping.html#webscraping-html-tables."><i class="fa fa-check"></i><b>4.1</b> Webscraping html Tables.</a><ul>
<li class="chapter" data-level="4.1.1" data-path="webscraping.html"><a href="webscraping.html#webscraping-responsibly"><i class="fa fa-check"></i><b>4.1.1</b> Webscraping Responsibly</a></li>
<li class="chapter" data-level="4.1.2" data-path="webscraping.html"><a href="webscraping.html#example-4.1.1"><i class="fa fa-check"></i><b>4.1.2</b> Example 4.1.1</a></li>
<li class="chapter" data-level="4.1.3" data-path="webscraping.html"><a href="webscraping.html#practice-4.1.2"><i class="fa fa-check"></i><b>4.1.3</b> Practice 4.1.2</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="webscraping.html"><a href="webscraping.html#webscraping-with-selector-gadget"><i class="fa fa-check"></i><b>4.2</b> Webscraping with Selector Gadget</a><ul>
<li class="chapter" data-level="4.2.1" data-path="webscraping.html"><a href="webscraping.html#webscraping-with-selector-gadget-1"><i class="fa fa-check"></i><b>4.2.1</b> Webscraping with Selector Gadget</a></li>
<li class="chapter" data-level="4.2.2" data-path="webscraping.html"><a href="webscraping.html#example-4.2.1-read-in-page"><i class="fa fa-check"></i><b>4.2.2</b> Example 4.2.1 Read in page</a></li>
<li class="chapter" data-level="4.2.3" data-path="webscraping.html"><a href="webscraping.html#example-4.2.2-scrape-titles"><i class="fa fa-check"></i><b>4.2.3</b> Example 4.2.2 Scrape titles</a></li>
<li class="chapter" data-level="4.2.4" data-path="webscraping.html"><a href="webscraping.html#example-4.2.3-scrape-ratings"><i class="fa fa-check"></i><b>4.2.4</b> Example 4.2.3 Scrape ratings</a></li>
<li class="chapter" data-level="4.2.5" data-path="webscraping.html"><a href="webscraping.html#practice-4.2.4-scrape-mpaa-ratings"><i class="fa fa-check"></i><b>4.2.5</b> Practice 4.2.4 Scrape MPAA ratings</a></li>
<li class="chapter" data-level="4.2.6" data-path="webscraping.html"><a href="webscraping.html#example-4.2.5-scrape-runtimes"><i class="fa fa-check"></i><b>4.2.6</b> Example 4.2.5 Scrape runtimes</a></li>
<li class="chapter" data-level="4.2.7" data-path="webscraping.html"><a href="webscraping.html#example-4.2.6-scrape-genre"><i class="fa fa-check"></i><b>4.2.7</b> Example 4.2.6 Scrape Genre</a></li>
<li class="chapter" data-level="4.2.8" data-path="webscraping.html"><a href="webscraping.html#practice-4.2.7-scrape-gross"><i class="fa fa-check"></i><b>4.2.8</b> Practice 4.2.7 Scrape Gross</a></li>
<li class="chapter" data-level="4.2.9" data-path="webscraping.html"><a href="webscraping.html#practice-4.2.8-scrape-metascore"><i class="fa fa-check"></i><b>4.2.9</b> Practice 4.2.8 Scrape Metascore</a></li>
<li class="chapter" data-level="4.2.10" data-path="webscraping.html"><a href="webscraping.html#practice-4.2.9-scrape-votes"><i class="fa fa-check"></i><b>4.2.10</b> Practice 4.2.9 Scrape Votes</a></li>
<li class="chapter" data-level="4.2.11" data-path="webscraping.html"><a href="webscraping.html#example-4.2.10-well-combine-the-vectors-of-length-50-into-a-tibble."><i class="fa fa-check"></i><b>4.2.11</b> Example 4.2.10 We'll combine the vectors of length 50 into a tibble.</a></li>
<li class="chapter" data-level="4.2.12" data-path="webscraping.html"><a href="webscraping.html#example-4.2.11-better-way-to-scrape-metascore"><i class="fa fa-check"></i><b>4.2.12</b> Example 4.2.11 Better way to scrape metascore</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data-Scientific Programming Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Data Wrangling</h1>
<p>These notes pertain to chapter 5 in Wickham and Grolemund's text. We'll consider data from Major League Baseball, available through the <code>Lahman()</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(Lahman)
select &lt;-<span class="st"> </span>dplyr<span class="op">::</span>select
summarize &lt;-<span class="st"> </span>dplyr<span class="op">::</span>summarize</code></pre></div>
<p>We create a tibble with batting records for all MLB players from 1871-2020</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(Lahman<span class="op">::</span>Batting)
<span class="kw">head</span>(batting)</code></pre></div>
<pre><code>## # A tibble: 6 x 22
##   playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 abercda01   1871     1 TRO    NA        1     4     0     0     0     0     0
## 2 addybo01    1871     1 RC1    NA       25   118    30    32     6     0     0
## 3 allisar01   1871     1 CL1    NA       29   137    28    40     4     5     0
## 4 allisdo01   1871     1 WS3    NA       27   133    28    44    10     2     2
## 5 ansonca01   1871     1 RC1    NA       25   120    29    39    11     3     0
## 6 armstbo01   1871     1 FW1    NA       12    49     9    11     2     1     0
## # … with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;,
## #   IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(batting)</code></pre></div>
<pre><code>## # A tibble: 6 x 22
##   playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 zimmebr01   2020     1 CLE    AL       20    37     3     6     0     0     1
## 2 zimmebr02   2020     1 BAL    AL        2     0     0     0     0     0     0
## 3 zimmejo02   2020     1 DET    AL        3     0     0     0     0     0     0
## 4 zimmeky01   2020     1 KCA    AL       16     0     0     0     0     0     0
## 5 zuberty01   2020     1 KCA    AL       23     0     0     0     0     0     0
## 6 zuninmi01   2020     1 TBA    AL       28    75     8    11     4     0     4
## # … with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;,
## #   IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(batting)</code></pre></div>
<pre><code>##    playerID             yearID         stint           teamID      lgID      
##  Length:108789      Min.   :1871   Min.   :1.000   CHN    : 5060   AA: 1893  
##  Class :character   1st Qu.:1937   1st Qu.:1.000   PHI    : 4971   AL:50133  
##  Mode  :character   Median :1976   Median :1.000   PIT    : 4920   FL:  472  
##                     Mean   :1967   Mean   :1.079   SLN    : 4853   NA:  737  
##                     3rd Qu.:2001   3rd Qu.:1.000   CIN    : 4731   NL:55071  
##                     Max.   :2020   Max.   :5.000   CLE    : 4683   PL:  149  
##                                                    (Other):79571   UA:  334  
##        G                AB              R                H         
##  Min.   :  1.00   Min.   :  0.0   Min.   :  0.00   Min.   :  0.00  
##  1st Qu.: 12.00   1st Qu.:  4.0   1st Qu.:  0.00   1st Qu.:  0.00  
##  Median : 34.00   Median : 46.0   Median :  4.00   Median :  8.00  
##  Mean   : 50.74   Mean   :139.2   Mean   : 18.48   Mean   : 36.39  
##  3rd Qu.: 79.00   3rd Qu.:224.0   3rd Qu.: 27.00   3rd Qu.: 56.00  
##  Max.   :165.00   Max.   :716.0   Max.   :198.00   Max.   :262.00  
##                                                                    
##       X2B              X3B               HR             RBI        
##  Min.   : 0.000   Min.   : 0.000   Min.   : 0.00   Min.   :  0.00  
##  1st Qu.: 0.000   1st Qu.: 0.000   1st Qu.: 0.00   1st Qu.:  0.00  
##  Median : 1.000   Median : 0.000   Median : 0.00   Median :  3.00  
##  Mean   : 6.202   Mean   : 1.247   Mean   : 2.85   Mean   : 16.79  
##  3rd Qu.: 9.000   3rd Qu.: 1.000   3rd Qu.: 2.00   3rd Qu.: 24.00  
##  Max.   :67.000   Max.   :36.000   Max.   :73.00   Max.   :191.00  
##                                                    NA&#39;s   :756     
##        SB                CS               BB               SO        
##  Min.   :  0.000   Min.   : 0.000   Min.   :  0.00   Min.   :  0.00  
##  1st Qu.:  0.000   1st Qu.: 0.000   1st Qu.:  0.00   1st Qu.:  1.00  
##  Median :  0.000   Median : 0.000   Median :  2.00   Median :  9.00  
##  Mean   :  2.919   Mean   : 1.177   Mean   : 12.84   Mean   : 20.56  
##  3rd Qu.:  2.000   3rd Qu.: 1.000   3rd Qu.: 18.00   3rd Qu.: 29.00  
##  Max.   :138.000   Max.   :42.000   Max.   :232.00   Max.   :223.00  
##  NA&#39;s   :2368      NA&#39;s   :23541                     NA&#39;s   :2100    
##       IBB              HBP               SH               SF       
##  Min.   :  0.00   Min.   : 0.000   Min.   : 0.000   Min.   : 0.00  
##  1st Qu.:  0.00   1st Qu.: 0.000   1st Qu.: 0.000   1st Qu.: 0.00  
##  Median :  0.00   Median : 0.000   Median : 0.000   Median : 0.00  
##  Mean   :  1.06   Mean   : 1.058   Mean   : 2.197   Mean   : 1.02  
##  3rd Qu.:  1.00   3rd Qu.: 1.000   3rd Qu.: 3.000   3rd Qu.: 1.00  
##  Max.   :120.00   Max.   :51.000   Max.   :67.000   Max.   :19.00  
##  NA&#39;s   :36650    NA&#39;s   :2816     NA&#39;s   :6068     NA&#39;s   :36103  
##       GIDP       
##  Min.   : 0.000  
##  1st Qu.: 0.000  
##  Median : 0.000  
##  Mean   : 2.893  
##  3rd Qu.: 4.000  
##  Max.   :36.000  
##  NA&#39;s   :25441</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(batting)</code></pre></div>
<pre><code>## [1] 108789     22</code></pre>
<div id="filtering-and-arranging-data-and-selecting-columns" class="section level2">
<h2><span class="header-section-number">2.1</span> Filtering and Arranging Data, and Selecting Columns</h2>
<p>The <code>filter()</code> command narrows a dataset to rows that meet a specified condition.</p>
<p>The <code>arrange()</code> command sorts a dataset according to a specified ordering.</p>
<p>The <code>select()</code> command narrows a dataset to a specified set of columns</p>
<p>These commands are part of the <code>dplyr</code> R package, which itself is part of <code>tidyverse</code>.</p>
<div id="example-2.1.1" class="section level3 unnumbered">
<h3>Example 2.1.1</h3>
<p>Using the baseball data, create a tibble with only data from the most recent season available (2020).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting2020 &lt;-<span class="st"> </span>batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(yearID <span class="op">==</span><span class="st"> </span><span class="dv">2020</span>)
<span class="kw">head</span>(batting2020)</code></pre></div>
<pre><code>## # A tibble: 6 x 22
##   playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 abreual01   2020     1 NYA    AL        2     0     0     0     0     0     0
## 2 abreubr01   2020     1 HOU    AL        4     0     0     0     0     0     0
## 3 abreujo02   2020     1 CHA    AL       60   240    43    76    15     0    19
## 4 acunaro01   2020     1 ATL    NL       46   160    46    40    11     0    14
## 5 adamewi01   2020     1 TBA    AL       54   185    29    48    15     1     8
## 6 adamja01    2020     1 CHN    NL       13     0     0     0     0     0     0
## # … with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;,
## #   IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<p>An equivalent way to do this is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting2020 &lt;-<span class="st"> </span><span class="kw">filter</span>(batting, yearID <span class="op">==</span><span class="st"> </span><span class="dv">2020</span>)
<span class="kw">head</span>(batting2020)</code></pre></div>
<pre><code>## # A tibble: 6 x 22
##   playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 abreual01   2020     1 NYA    AL        2     0     0     0     0     0     0
## 2 abreubr01   2020     1 HOU    AL        4     0     0     0     0     0     0
## 3 abreujo02   2020     1 CHA    AL       60   240    43    76    15     0    19
## 4 acunaro01   2020     1 ATL    NL       46   160    46    40    11     0    14
## 5 adamewi01   2020     1 TBA    AL       54   185    29    48    15     1     8
## 6 adamja01    2020     1 CHN    NL       13     0     0     0     0     0     0
## # … with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;,
## #   IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<p>We'll use the first way, though. The %&gt;% operator (called <strong>pipe</strong>) has advantages and makes coding more convenient when stringing together multiple operations.</p>
</div>
<div id="example-2.1.2" class="section level3 unnumbered">
<h3>Example 2.1.2</h3>
<p>Create a tibble including only players who played for teams currently in the National League Central division: Milwaukee (MIL), Chicago Cubs (CHN), Pittsburgh (PIT), Cincinnati (CIN), and St. Louis (SLN).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting_NLCentral &lt;-<span class="st"> </span>batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(teamID <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;MIL&quot;</span>, <span class="st">&quot;CHN&quot;</span>, <span class="st">&quot;PIT&quot;</span>, <span class="st">&quot;CIN&quot;</span>, <span class="st">&quot;SNL&quot;</span>))
<span class="kw">head</span>(batting_NLCentral)</code></pre></div>
<pre><code>## # A tibble: 6 x 22
##   playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 addybo01    1876     1 CHN    NL       32   142    36    40     4     1     0
## 2 andrufr01   1876     1 CHN    NL        8    36     6    11     3     0     0
## 3 ansonca01   1876     1 CHN    NL       66   309    63   110     9     7     2
## 4 barnero01   1876     1 CHN    NL       66   322   126   138    21    14     1
## 5 bielaos01   1876     1 CHN    NL       32   139    24    29     3     0     0
## 6 glennjo01   1876     1 CHN    NL       66   276    55    84     9     2     0
## # … with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;,
## #   IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
</div>
<div id="example-2.1.3" class="section level3 unnumbered">
<h3>Example 2.1.3</h3>
<p>Order the entire baseball tibble from most homeruns to fewest.</p>
<p>Note: we use <code>desc()</code> to sort in descending order. To sort in ascending order, simply put the name of the variable, i.e. <code>HR</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(HR))</code></pre></div>
<pre><code>## # A tibble: 108,789 x 22
##    playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 bondsba01   2001     1 SFN    NL      153   476   129   156    32     2    73
##  2 mcgwima01   1998     1 SLN    NL      155   509   130   152    21     0    70
##  3 sosasa01    1998     1 CHN    NL      159   643   134   198    20     0    66
##  4 mcgwima01   1999     1 SLN    NL      153   521   118   145    21     1    65
##  5 sosasa01    2001     1 CHN    NL      160   577   146   189    34     5    64
##  6 sosasa01    1999     1 CHN    NL      162   625   114   180    24     2    63
##  7 marisro01   1961     1 NYA    AL      161   590   132   159    16     4    61
##  8 ruthba01    1927     1 NYA    AL      151   540   158   192    29     8    60
##  9 ruthba01    1921     1 NYA    AL      152   540   177   204    44    16    59
## 10 stantmi03   2017     1 MIA    NL      159   597   123   168    32     0    59
## # … with 108,779 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
</div>
<div id="example-2.1.4" class="section level3 unnumbered">
<h3>Example 2.1.4</h3>
<p>Create a tibble that contains only the columns <code>playerID</code>, <code>yearID</code>, <code>teamID</code>, <code>AB</code>, <code>H</code>, and <code>HR</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting1 &lt;-<span class="st"> </span>batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(playerID, yearID, teamID, AB, H, HR)
<span class="kw">head</span>(batting1)</code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   playerID  yearID teamID    AB     H    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 abercda01   1871 TRO        4     0     0
## 2 addybo01    1871 RC1      118    32     0
## 3 allisar01   1871 CL1      137    40     0
## 4 allisdo01   1871 WS3      133    44     2
## 5 ansonca01   1871 RC1      120    39     0
## 6 armstbo01   1871 FW1       49    11     0</code></pre>
</div>
<div id="example-2.1.5" class="section level3 unnumbered">
<h3>Example 2.1.5</h3>
<p>The <code>%&gt;%</code> (pipe) operator allows us to string together multiple commands.</p>
<p>Create a tibble including only players who batted at least 500 times in a season and played for Milwaukee (MIL) during or after the 2000 season. Include the columns <code>playerID</code>, <code>yearID</code>, and <code>RBI</code>, and order the players by most RBI to fewest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting_MIL &lt;-<span class="st"> </span>batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(teamID <span class="op">==</span><span class="st"> &quot;MIL&quot;</span> <span class="op">&amp;</span><span class="st"> </span>yearID <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2000</span>) <span class="op">%&gt;%</span>
<span class="st">              </span><span class="kw">select</span>(playerID, yearID, RBI) <span class="op">%&gt;%</span>
<span class="st">              </span><span class="kw">arrange</span>(<span class="kw">desc</span>(RBI))
<span class="kw">head</span>(batting_MIL)</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   playerID  yearID   RBI
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt;
## 1 fieldpr01   2009   141
## 2 sexsori01   2001   125
## 3 sexsori01   2003   124
## 4 fieldpr01   2011   120
## 5 fieldpr01   2007   119
## 6 leeca01     2005   114</code></pre>
</div>
<div id="practice-2.1.6" class="section level3 unnumbered">
<h3>Practice 2.1.6</h3>
<p>Create a subset of the data that includes only players who played in the American League (AL) after 1950.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Type code here</span></code></pre></div>
</div>
<div id="practice-2.1.7" class="section level3 unnumbered">
<h3>Practice 2.1.7</h3>
<p>Create a tibble containing all players, but only the variables <code>playerID</code>, <code>yearID</code>, &quot;G&quot;, &quot;H&quot;, and &quot;HR&quot;.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Type code here</span></code></pre></div>
</div>
<div id="practice-2.1.8" class="section level3 unnumbered">
<h3>Practice 2.1.8</h3>
<p>Order the rows from most hits in a season to fewest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Type code here</span></code></pre></div>
</div>
<div id="example-2.1.9-multiple-logicals" class="section level3 unnumbered">
<h3>Example 2.1.9 Multiple Logicals</h3>
<p>The current Washington Nationals franchise previously played in Montreal from 1969-2004, and was known as the Expos. Create a dataset containing statistics for this franchise, including both its time in Montreal, and Washington. Arrange in descending order by number of homeruns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting_MON_WAS &lt;-<span class="st"> </span>batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>( (teamID<span class="op">==</span><span class="st">&quot;MON&quot;</span> <span class="op">&amp;</span><span class="st"> </span>yearID <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1969</span> <span class="op">&amp;</span><span class="st"> </span>yearID <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2004</span>)
                         <span class="op">|</span><span class="st"> </span>(teamID<span class="op">==</span><span class="st">&quot;WAS&quot;</span> <span class="op">&amp;</span><span class="st"> </span>yearID <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2005</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(HR))
batting_MON_WAS</code></pre></div>
<pre><code>## # A tibble: 2,242 x 22
##    playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 soriaal01   2006     1 WAS    NL      159   647   119   179    41     2    46
##  2 guerrvl01   2000     1 MON    NL      154   571   101   197    28    11    44
##  3 guerrvl01   1999     1 MON    NL      160   610   102   193    37     5    42
##  4 harpebr03   2015     1 WAS    NL      153   521   118   172    38     1    42
##  5 guerrvl01   2002     1 MON    NL      161   614   106   206    37     2    39
##  6 guerrvl01   1998     1 MON    NL      159   623   108   202    37     7    38
##  7 dunnad01    2009     1 WAS    NL      159   546    81   146    29     0    38
##  8 dunnad01    2010     1 WAS    NL      158   558    85   145    36     2    38
##  9 rodrihe02   1996     1 MON    NL      145   532    81   147    42     1    36
## 10 zimmery01   2017     1 WAS    NL      144   524    90   159    33     0    36
## # … with 2,232 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;,
## #   BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(batting_MON_WAS)</code></pre></div>
<pre><code>## # A tibble: 6 x 22
##   playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 soriaal01   2006     1 WAS    NL      159   647   119   179    41     2    46
## 2 guerrvl01   2000     1 MON    NL      154   571   101   197    28    11    44
## 3 guerrvl01   1999     1 MON    NL      160   610   102   193    37     5    42
## 4 harpebr03   2015     1 WAS    NL      153   521   118   172    38     1    42
## 5 guerrvl01   2002     1 MON    NL      161   614   106   206    37     2    39
## 6 guerrvl01   1998     1 MON    NL      159   623   108   202    37     7    38
## # … with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;,
## #   IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(batting_MON_WAS)</code></pre></div>
<pre><code>## # A tibble: 6 x 22
##   playerID  yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 romerse01   2020     1 WAS    NL        3     0     0     0     0     0     0
## 2 sanchan01   2020     1 WAS    NL       11     0     0     0     0     0     0
## 3 scherma01   2020     1 WAS    NL       12     0     0     0     0     0     0
## 4 strasst01   2020     1 WAS    NL        2     0     0     0     0     0     0
## 5 suerowa01   2020     1 WAS    NL       22     0     0     0     0     0     0
## 6 vothau01    2020     1 WAS    NL       11     0     0     0     0     0     0
## # … with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;,
## #   IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
</div>
<div id="example-2.1.10-dealing-with-nas" class="section level3 unnumbered">
<h3>Example 2.1.10: Dealing with NA's</h3>
<p>For some batters, stolen base data (SB) were not available. Filter the dataset to only include rows for which stolen base data were available.</p>
<p>The <code>is.na()</code> command returns TRUE/FALSE depending on whether the value is missing(NA). Here we use the negation operator <code>!</code>, since we want the rows that are not na's.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">battingSB &lt;-<span class="st"> </span>batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SB))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(battingSB)</code></pre></div>
<pre><code>## [1] 106421     22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(batting)</code></pre></div>
<pre><code>## [1] 108789     22</code></pre>
</div>
<div id="practice-2.1.11" class="section level3 unnumbered">
<h3>Practice 2.1.11</h3>
<p>Create a tibble that contains only players who played in every one of their team's games in a season. Only consider seasons from 1904 on, since season length was highly variable prior to 1904.</p>
<p>Note that beginning in 1904, teams played 154 games per season. In 1961, the American League (AL) expanded to 162 games. The National League expanded to 162 games in 1962. From 1962-2019, teams played 162 games per season. In 2020, teams only played 60 games, due to covid-19.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Enter code here</span></code></pre></div>
</div>
<div id="practice-2.1.12" class="section level3 unnumbered">
<h3>Practice 2.1.12</h3>
<p>Create a tibble that contains only players who played for Milwaukee in 2020, but contains statistics from all years in these player's careers, whether or not they played for Milwaukee.</p>
<p>For example since Christian Yelich played for Milwaukee in 2020, all of his seasons should be included in the dataset, including 2013-2017, when he did not play for Milwaukee.</p>
<p>Include the variables <code>playerID</code>, <code>yearID</code>, <code>teamID</code>, <code>AB</code>, <code>H</code>, and <code>HR</code>, and order the dataframe in descending order by homeruns (HR).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter code here</span></code></pre></div>
</div>
</div>
<div id="mutating-summarizing-and-grouping-data" class="section level2">
<h2><span class="header-section-number">2.2</span> Mutating, Summarizing, and Grouping Data</h2>
<p>The <code>mutate</code> and <code>transmute</code> functions allow us to create new variables in a dataset from old ones.</p>
<div id="example-2.2.1" class="section level3 unnumbered">
<h3>Example 2.2.1</h3>
<p>A player's <strong>batting average</strong> is defined as number of hits (H) divided by number of at-bats (AB).</p>
<p>A player's <strong>on-base percentage</strong> is defined as number of hits (H), walks (BB), times hit by pitch (HBP), divided by number of at-bats, walks, times hit by pitch, and sacrifice flies (SF).</p>
<p>A player's slugging percentage is defined as singles + 2doubles (X2B) + 3 triples (X3B) + 4 homeruns (HR) divided by number of at-bats.</p>
<p>We'll create each of these variables. Note that since singles is not a variable in the dataset, we'll create it by subtracting doubles, triples, and homeruns from hits.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">AVG =</span> H <span class="op">/</span><span class="st"> </span>AB,
                                  <span class="dt">OBP =</span> (H <span class="op">+</span><span class="st"> </span>BB <span class="op">+</span><span class="st"> </span>HBP) <span class="op">/</span><span class="st"> </span>(AB <span class="op">+</span><span class="st"> </span>BB <span class="op">+</span><span class="st"> </span>HBP <span class="op">+</span>SF),
                                  <span class="dt">X1B =</span> H <span class="op">-</span><span class="st"> </span>X2B <span class="op">-</span><span class="st"> </span>X3B <span class="op">-</span><span class="st"> </span>HR,
                                  <span class="dt">SLG =</span> (X1B <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>X2B <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>X3B <span class="op">+</span><span class="st"> </span><span class="dv">4</span><span class="op">*</span><span class="st"> </span>HR) <span class="op">/</span><span class="st"> </span>AB) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(playerID, yearID, teamID, AB, H, HR, BB, HBP, SF, AVG, OBP, SLG)</code></pre></div>
<pre><code>## # A tibble: 108,789 x 12
##    playerID  yearID teamID    AB     H    HR    BB   HBP    SF   AVG   OBP   SLG
##    &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda01   1871 TRO        4     0     0     0    NA    NA 0        NA 0    
##  2 addybo01    1871 RC1      118    32     0     4    NA    NA 0.271    NA 0.322
##  3 allisar01   1871 CL1      137    40     0     2    NA    NA 0.292    NA 0.394
##  4 allisdo01   1871 WS3      133    44     2     0    NA    NA 0.331    NA 0.481
##  5 ansonca01   1871 RC1      120    39     0     2    NA    NA 0.325    NA 0.467
##  6 armstbo01   1871 FW1       49    11     0     0    NA    NA 0.224    NA 0.306
##  7 barkeal01   1871 RC1        4     1     0     1    NA    NA 0.25     NA 0.25 
##  8 barnero01   1871 BS1      157    63     0    13    NA    NA 0.401    NA 0.580
##  9 barrebi01   1871 FW1        5     1     0     0    NA    NA 0.2      NA 0.4  
## 10 barrofr01   1871 BS1       86    13     0     0    NA    NA 0.151    NA 0.198
## # … with 108,779 more rows</code></pre>
<p>While <code>mutate</code> displays all variables in the dataset, <code>transmute</code> displays only the ones created.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transmute</span>(<span class="dt">AVG =</span> H <span class="op">/</span><span class="st"> </span>AB,
                                  <span class="dt">OBP =</span> (H <span class="op">+</span><span class="st"> </span>BB <span class="op">+</span><span class="st"> </span>HBP) <span class="op">/</span><span class="st"> </span>(AB <span class="op">+</span><span class="st"> </span>BB <span class="op">+</span><span class="st"> </span>HBP <span class="op">+</span>SF),
                                  <span class="dt">X1B =</span> H <span class="op">-</span><span class="st"> </span>X2B <span class="op">-</span><span class="st"> </span>X3B <span class="op">-</span><span class="st"> </span>HR,
                                  <span class="dt">SLG =</span> (X1B <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>X2B <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>X3B <span class="op">+</span><span class="st"> </span><span class="dv">4</span><span class="op">*</span><span class="st"> </span>HR) <span class="op">/</span><span class="st"> </span>AB) </code></pre></div>
<pre><code>## # A tibble: 108,789 x 4
##      AVG   OBP   X1B   SLG
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
##  1 0        NA     0 0    
##  2 0.271    NA    26 0.322
##  3 0.292    NA    31 0.394
##  4 0.331    NA    30 0.481
##  5 0.325    NA    25 0.467
##  6 0.224    NA     8 0.306
##  7 0.25     NA     1 0.25 
##  8 0.401    NA    44 0.580
##  9 0.2      NA     0 0.4  
## 10 0.151    NA    10 0.198
## # … with 108,779 more rows</code></pre>
</div>
<div id="example-2.2.2" class="section level3 unnumbered">
<h3>Example 2.2.2</h3>
<p>Create a new variable that indicates whether or not a player played for a team currently in the National League Central Division (MIL, CIN, CHN, CIN, PIT).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">NLCentral =</span> <span class="kw">ifelse</span>(teamID <span class="op">%in%</span><span class="kw">c</span>(<span class="st">&quot;MIL&quot;</span>, <span class="st">&quot;CIN&quot;</span>, <span class="st">&quot;CHN&quot;</span>, <span class="st">&quot;CIN&quot;</span>, <span class="st">&quot;PIT&quot;</span>), <span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(playerID,  yearID, teamID, NLCentral)</code></pre></div>
<pre><code>## # A tibble: 108,789 x 4
##    playerID  yearID teamID NLCentral
##    &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;chr&gt;    
##  1 abercda01   1871 TRO    No       
##  2 addybo01    1871 RC1    No       
##  3 allisar01   1871 CL1    No       
##  4 allisdo01   1871 WS3    No       
##  5 ansonca01   1871 RC1    No       
##  6 armstbo01   1871 FW1    No       
##  7 barkeal01   1871 RC1    No       
##  8 barnero01   1871 BS1    No       
##  9 barrebi01   1871 FW1    No       
## 10 barrofr01   1871 BS1    No       
## # … with 108,779 more rows</code></pre>
</div>
<div id="summarize" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Summarize</h3>
<p>The <code>summarize</code> command calculates summary statistics for all variables in the dataset.</p>
<p>The <code>n()</code> command returns the number of rows included in the summary.</p>
</div>
<div id="example-2.2.3" class="section level3 unnumbered">
<h3>Example 2.2.3</h3>
<p>Calculate the minimum, maximum, mean, median, and upper and lower quartiles for number stolen bases</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">min_SB =</span> <span class="kw">min</span>(SB), 
                      <span class="dt">Q1_SB =</span> <span class="kw">quantile</span>(SB, <span class="fl">0.25</span>),
                      <span class="dt">median_SB =</span> <span class="kw">median</span>(SB),
                      <span class="dt">Q3_SB =</span> <span class="kw">quantile</span>(SB, <span class="fl">0.75</span>), 
                      <span class="dt">max_SB =</span> <span class="kw">max</span>(SB), 
                      <span class="dt">mean_SB =</span><span class="kw">mean</span>(SB),
                      <span class="dt">Number =</span> <span class="kw">n</span>())</code></pre></div>
<pre><code>## Error: Problem with `summarise()` input `Q1_SB`.
## x missing values and NaN&#39;s not allowed if &#39;na.rm&#39; is FALSE
## ℹ Input `Q1_SB` is `quantile(SB, 0.25)`.</code></pre>
<p>The quantities we desire cannot be calculated some players have missing values. We tell R to ignore missing values using the argument <code>na.rm=TRUE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">min_SB =</span> <span class="kw">min</span>(SB, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), 
                      <span class="dt">Q1_SB =</span> <span class="kw">quantile</span>(SB, <span class="fl">0.25</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),
                      <span class="dt">median_SB =</span> <span class="kw">median</span>(SB, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),
                      <span class="dt">Q3_SB =</span> <span class="kw">quantile</span>(SB, <span class="fl">0.75</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), 
                      <span class="dt">max_SB =</span> <span class="kw">max</span>(SB, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), 
                      <span class="dt">mean_SB =</span><span class="kw">mean</span>(SB, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),
                      <span class="dt">Number =</span> <span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(SB)))</code></pre></div>
<pre><code>## # A tibble: 1 x 7
##   min_SB Q1_SB median_SB Q3_SB max_SB mean_SB Number
##    &lt;int&gt; &lt;dbl&gt;     &lt;int&gt; &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt;
## 1      0     0         0     2    138    2.92 106421</code></pre>
</div>
<div id="practice-2.2.4" class="section level3 unnumbered">
<h3>Practice 2.2.4</h3>
<p>Create a variable to calculate each player's stolen base success proportion (SB/(SB+CS)).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
</div>
<div id="practice-2.2.5" class="section level3 unnumbered">
<h3>Practice 2.2.5</h3>
<p>Calculate the minimum, maximum, mean, median, and upper and lower quartiles for humber hits. Also give the total number of players in the dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
</div>
<div id="example-2.2.6" class="section level3 unnumbered">
<h3>Example 2.2.6</h3>
<p>While overall summaries are sometimes useful, often it is far more useful to summarize by group. The <code>group_by</code> command allows us to calculate summary statistics broken down by group.</p>
<p>Calculate the number of homeruns (HR), hits (H), and at-bats (AB) for by each team, throughout baseball history.</p>
<p>When grouping, <code>n()</code> returns the number of observations in each group.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(teamID) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">HR =</span> <span class="kw">sum</span>(HR),
            <span class="dt">H=</span> <span class="kw">sum</span>(H), 
            <span class="dt">AB=</span> <span class="kw">sum</span>(AB),
            <span class="dt">Total_Player_Seasons =</span> <span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(HR))</code></pre></div>
<pre><code>## # A tibble: 149 x 5
##    teamID    HR      H     AB Total_Player_Seasons
##    &lt;fct&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;                &lt;int&gt;
##  1 NYA    16309 166924 626513                 4471
##  2 CHN    14449 194194 739897                 5060
##  3 DET    13904 169123 637722                 4413
##  4 BOS    13793 170584 638385                 4515
##  5 PHI    13321 187367 718794                 4971
##  6 CIN    13255 179875 688343                 4731
##  7 CLE    13228 168997 636579                 4683
##  8 SLN    12046 181892 682991                 4853
##  9 CHA    11606 164533 632007                 4476
## 10 PIT    11564 187060 706152                 4920
## # … with 139 more rows</code></pre>
<p>While we might be interested in knowing the number of total player seasons for each team, it might be more interesting to know the number of different batters who have played for each team. We can accomplish this using the <code>unique()</code> function. The command <code>unique(playerID)</code> creates a vector of unique player ID's for each team. The <code>length()</code> command returns the length of each vector (i.e. number of different batters).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(teamID) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">HR =</span> <span class="kw">sum</span>(HR),
            <span class="dt">H=</span> <span class="kw">sum</span>(H), 
            <span class="dt">AB=</span> <span class="kw">sum</span>(AB),
            <span class="dt">Total_Batters =</span> <span class="kw">length</span>(<span class="kw">unique</span>(playerID))
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(HR))</code></pre></div>
<pre><code>## # A tibble: 149 x 5
##    teamID    HR      H     AB Total_Batters
##    &lt;fct&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;         &lt;int&gt;
##  1 NYA    16309 166924 626513          1709
##  2 CHN    14449 194194 739897          2117
##  3 DET    13904 169123 637722          1718
##  4 BOS    13793 170584 638385          1838
##  5 PHI    13321 187367 718794          2103
##  6 CIN    13255 179875 688343          1977
##  7 CLE    13228 168997 636579          1917
##  8 SLN    12046 181892 682991          2024
##  9 CHA    11606 164533 632007          1807
## 10 PIT    11564 187060 706152          1945
## # … with 139 more rows</code></pre>
</div>
<div id="example-2.2.7" class="section level3 unnumbered">
<h3>Example 2.2.7</h3>
<p>Calculate each team's all-time batting average. Include only teams with at least 100,000 at-bats. Sort by batting average.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(teamID) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">HR =</span> <span class="kw">sum</span>(HR),
            <span class="dt">H=</span> <span class="kw">sum</span>(H), 
            <span class="dt">AB=</span> <span class="kw">sum</span>(AB),
            <span class="dt">Total_Batters =</span> <span class="kw">length</span>(<span class="kw">unique</span>(playerID)),
            <span class="dt">AVG =</span> H <span class="op">/</span><span class="st"> </span>AB
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(AB <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(AVG))</code></pre></div>
<pre><code>## # A tibble: 39 x 6
##    teamID    HR      H     AB Total_Batters   AVG
##    &lt;fct&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;         &lt;int&gt; &lt;dbl&gt;
##  1 COL     5013  41243 150606           593 0.274
##  2 NY1     5776 103368 381156           894 0.271
##  3 BOS    13793 170584 638385          1838 0.267
##  4 BRO     4338  93508 350213           875 0.267
##  5 NYA    16309 166924 626513          1709 0.266
##  6 SLN    12046 181892 682991          2024 0.266
##  7 PHA     3502  74209 278843           783 0.266
##  8 CLE    13228 168997 636579          1917 0.265
##  9 DET    13904 169123 637722          1718 0.265
## 10 PIT    11564 187060 706152          1945 0.265
## # … with 29 more rows</code></pre>
</div>
<div id="example-2.2.8" class="section level3 unnumbered">
<h3>Example 2.2.8</h3>
<p>Some of these teams do not exist anymore, while others came about more recently. Let's include the earliest and latest year that each team played.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(teamID) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">HR =</span> <span class="kw">sum</span>(HR),
            <span class="dt">H=</span> <span class="kw">sum</span>(H), 
            <span class="dt">AB=</span> <span class="kw">sum</span>(AB),
            <span class="dt">Total_Batters =</span> <span class="kw">length</span>(<span class="kw">unique</span>(playerID)),
            <span class="dt">AVG =</span> H <span class="op">/</span><span class="st"> </span>AB,
            <span class="dt">First_Year =</span> <span class="kw">min</span>(yearID),
            <span class="dt">Last_Year =</span> <span class="kw">max</span>(yearID)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(AB <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(AVG))</code></pre></div>
<pre><code>## # A tibble: 39 x 8
##    teamID    HR      H     AB Total_Batters   AVG First_Year Last_Year
##    &lt;fct&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;         &lt;int&gt; &lt;dbl&gt;      &lt;int&gt;     &lt;int&gt;
##  1 COL     5013  41243 150606           593 0.274       1993      2020
##  2 NY1     5776 103368 381156           894 0.271       1883      1957
##  3 BOS    13793 170584 638385          1838 0.267       1901      2020
##  4 BRO     4338  93508 350213           875 0.267       1890      1957
##  5 NYA    16309 166924 626513          1709 0.266       1903      2020
##  6 SLN    12046 181892 682991          2024 0.266       1892      2020
##  7 PHA     3502  74209 278843           783 0.266       1901      1954
##  8 CLE    13228 168997 636579          1917 0.265       1901      2020
##  9 DET    13904 169123 637722          1718 0.265       1901      2020
## 10 PIT    11564 187060 706152          1945 0.265       1887      2020
## # … with 29 more rows</code></pre>
</div>
<div id="example-2.2.9" class="section level3 unnumbered">
<h3>Example 2.2.9</h3>
<p>We can group by more than one variable. Let's calculate the number of hits, homeruns, and at-bats, and batting average for each team in each season.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(teamID, yearID) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">HR =</span> <span class="kw">sum</span>(HR),
            <span class="dt">H=</span> <span class="kw">sum</span>(H), 
            <span class="dt">AB=</span> <span class="kw">sum</span>(AB),
            <span class="dt">AVG =</span> H <span class="op">/</span><span class="st"> </span>AB
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(HR))</code></pre></div>
<pre><code>## # A tibble: 2,955 x 6
## # Groups:   teamID [149]
##    teamID yearID    HR     H    AB   AVG
##    &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1 MIN      2019   307  1547  5732 0.270
##  2 NYA      2019   306  1493  5583 0.267
##  3 HOU      2019   288  1538  5613 0.274
##  4 LAN      2019   279  1414  5493 0.257
##  5 NYA      2018   267  1374  5515 0.249
##  6 SEA      1997   264  1574  5614 0.280
##  7 TEX      2005   260  1528  5716 0.267
##  8 BAL      1996   257  1557  5689 0.274
##  9 OAK      2019   257  1384  5561 0.249
## 10 TOR      2010   257  1364  5495 0.248
## # … with 2,945 more rows</code></pre>
</div>
<div id="practice-2.2.10" class="section level3 unnumbered">
<h3>Practice 2.2.10</h3>
<p>Calculate the total number of at-bats (AB), hits (H), and homeruns (HR) for each player throughout their career. Also calculate their career batting average (H / AB). Sort the dataset from most hits to fewest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
</div>
<div id="practice-2.2.11" class="section level3 unnumbered">
<h3>Practice 2.2.11</h3>
<p>Calculate the total number of records (rows) for each player in the dataset. Order from most to least. Also include the player's first and last season. Note that some players played non-consecutive seasons, so the number of records will not necessarily equal the difference between the first and last seasons.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
</div>
<div id="practice-2.2.12" class="section level3 unnumbered">
<h3>Practice 2.2.12</h3>
<p>The total number of records for each player is not quite equal to their total number of seasons played, since players sometimes play for more than one team in a season. Calculate the total number of seasons played by each player.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
</div>
<div id="practice-2.2.13" class="section level3 unnumbered">
<h3>Practice 2.2.13</h3>
<p>Calculate the average number of stolen bases and homeruns per team for each year since 1871. For example, the average number of homeruns per team was 226.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
<p>Plot the average number of homeruns and stolen bases against year.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Enter Code Here</span></code></pre></div>
</div>
</div>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">2.3</span> Tidy Data</h2>
<p>Data are stored in many different forms. Some are easier to work with than others. Packages in <code>tidyverse</code> (<code>gglot2</code>, <code>dplyr</code>, etc.) are designed to work with tidy data. This means:</p>
<ul>
<li>Each variable must have its own column.<br />
</li>
<li>Each observation must have its own row.<br />
</li>
<li>Each value must have its own cell.</li>
</ul>
<p>Note that any two of these imply the third.</p>
<p>Since data often come in non-tidy form, we often need to reshape our data before creating graphs or calculating summary statistics. Often, we see either:</p>
<ol style="list-style-type: decimal">
<li>one variable spread across multiple columns OR</li>
<li>one observation spread across multiple rows</li>
</ol>
<p>Such data can be reshaped into tidy form using the <code>pivot_longer()</code> or <code>pivot_wider()</code> commands.</p>
<div id="example-2.3.1-pivot_longer" class="section level3 unnumbered">
<h3>Example 2.3.1: <code>pivot_longer()</code></h3>
<p>We consider a dataset containing results from a <a href="https://www.rdocumentation.org/packages/reshape/versions/0.8.8/topics/French%20fries">10 week sensory experiment on french fries</a>, conducted at Iowa State University in 2004.</p>
<ul>
<li>12 individuals were asked to assess the taste of french fries according to how they taste with respect to five different criteria:
<ul>
<li>potato-y<br />
</li>
<li>buttery<br />
</li>
<li>grassy<br />
</li>
<li>rancid<br />
</li>
<li>paint-y</li>
</ul></li>
<li>fries were fried in 1 of 3 different oils (treatment). Each week, individuals tasted and assessed six batches of fries (all three oils, replicated twice)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Fries &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/AndrewjSage/andrewjsage.github.io/master/Datasets/frenchfries.csv&quot;</span>)
Fries</code></pre></div>
<pre><code>## # A tibble: 696 x 9
##     time treatment subject   rep potato buttery grassy rancid painty
##    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1     1         1       3     1    2.9     0      0      0      5.5
##  2     1         1       3     2   14       0      0      1.1    0  
##  3     1         1      10     1   11       6.4    0      0      0  
##  4     1         1      10     2    9.9     5.9    2.9    2.2    0  
##  5     1         1      15     1    1.2     0.1    0      1.1    5.1
##  6     1         1      15     2    8.8     3      3.6    1.5    2.3
##  7     1         1      16     1    9       2.6    0.4    0.1    0.2
##  8     1         1      16     2    8.2     4.4    0.3    1.4    4  
##  9     1         1      19     1    7       3.2    0      4.9    3.2
## 10     1         1      19     2   13       0      3.1    4.3   10.3
## # … with 686 more rows</code></pre>
<ul>
<li>Suppose we want to create a boxplot displaying ratings for each of the five critera, while faceting by type of oil (<code>treatment</code>). Can we do this with the data in its current format? Why or why not?</li>
</ul>
<p>Note that in format 1, the column names <code>potato</code>, <code>buttery</code>, <code>grassy</code>, <code>rancid</code>, <code>painty</code> are not names of variables, but rather categories (or levels) of the variable <code>criterion</code>. Thus, each row represents 5 observations, not 1.</p>
<p>The <code>pivot_longer()</code> command converts a &quot;wide&quot; dataset like format 1 into a &quot;longer&quot; tidy form.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Fries_tidy &lt;-<span class="st"> </span>Fries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">c</span>(<span class="st">&quot;potato&quot;</span>, <span class="st">&quot;buttery&quot;</span>, <span class="st">&quot;grassy&quot;</span>, <span class="st">&quot;rancid&quot;</span>, <span class="st">&quot;painty&quot;</span>), 
                                      <span class="dt">names_to =</span> <span class="st">&quot;criterion&quot;</span>, <span class="dt">values_to=</span><span class="st">&quot;rating&quot;</span>)</code></pre></div>
<ul>
<li><code>cols</code> specifies the columns whose names should be made into the values, or levels of a single variable.<br />
</li>
<li><code>names_to</code> specifies the name of the variable to be made out of the column names.<br />
</li>
<li><code>values_to</code> specifies the name of the variable that will contain the values in these columns of the dataset. (Note that quotes are required when creating variables whose names do not exist in the original dataset.)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(Fries_tidy)</code></pre></div>
<pre><code>## # A tibble: 6 x 6
##    time treatment subject   rep criterion rating
##   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;
## 1     1         1       3     1 potato       2.9
## 2     1         1       3     1 buttery      0  
## 3     1         1       3     1 grassy       0  
## 4     1         1       3     1 rancid       0  
## 5     1         1       3     1 painty       5.5
## 6     1         1       3     2 potato      14</code></pre>
<p>Now, we can create the plot we desire.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>Fries_tidy) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>criterion, <span class="dt">y=</span>rating)) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(<span class="op">~</span>treatment) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()</code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-90-1.png" width="576" /></p>
<p>We can save a .csv file containing the new dataset using the <code>write.csv</code> command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(Fries_tidy, <span class="dt">file=</span><span class="st">&quot;Fries_tidy.csv&quot;</span>)</code></pre></div>
</div>
<div id="example-2.3.2-pivot_wider" class="section level3 unnumbered">
<h3>Example 2.3.2 <code>pivot_wider</code></h3>
<p>This dataset gives the median annual income and median monthly rent in 2017 for each of the 50 US states.</p>
<p><code>estimate</code> represents the estimated monthly income or rent, and <code>moe</code> represents the margin of error for that estimate.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(us_rent_income)</code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   GEOID NAME    variable estimate   moe
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 01    Alabama income      24476   136
## 2 01    Alabama rent          747     3
## 3 02    Alaska  income      32940   508
## 4 02    Alaska  rent         1200    13
## 5 04    Arizona income      27517   148
## 6 04    Arizona rent          972     4</code></pre>
<p>Why are these data not in tidy form?</p>
<p>What would happen if we tried to create a histogram of annual rent estimates?</p>
<p>We use the <code>pivot_wider()</code> command to reshape these data into tidy form.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">us_rent_income_tidy &lt;-<span class="st"> </span>us_rent_income <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> variable, <span class="dt">values_from=</span><span class="kw">c</span>(<span class="st">&quot;estimate&quot;</span>, <span class="st">&quot;moe&quot;</span>))
<span class="kw">head</span>(us_rent_income_tidy)</code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   GEOID NAME       estimate_income estimate_rent moe_income moe_rent
##   &lt;chr&gt; &lt;chr&gt;                &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
## 1 01    Alabama              24476           747        136        3
## 2 02    Alaska               32940          1200        508       13
## 3 04    Arizona              27517           972        148        4
## 4 05    Arkansas             23789           709        165        5
## 5 06    California           29454          1358        109        3
## 6 08    Colorado             32401          1125        109        5</code></pre>
<ul>
<li><code>names_from</code> specifies the single column to be spread over multiple columns.</li>
<li><code>values_from</code> specifies the variables from which to obtain the values for the new columns</li>
</ul>
<p>By default, new column names will consist of the old column names and the variables in <code>names_from</code>, separated by a _</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> us_rent_income_tidy) <span class="op">+</span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x=</span>estimate_rent), <span class="dt">binwidth=</span><span class="dv">100</span>)</code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-94-1.png" width="576" /></p>
</div>
<div id="example-2.3.3-separate-and-unite" class="section level3 unnumbered">
<h3>Example 2.3.3 <code>separate()</code> and <code>unite()</code></h3>
<p>Sometimes, we need to split a column into two columns. This can be done using the <code>separate()</code> command. For example, the following dataset has a variable called <code>rate</code>, which gives the ratio of cases of TB in various countries, to the country's population.</p>
<p>Let's create two columns, one with the number of TB cases, and the other with population.</p>
<pre><code>## # A tibble: 6 x 3
##   country      year rate             
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">TBcases_sep &lt;-<span class="st"> </span>TBcases <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(<span class="st">&quot;rate&quot;</span>, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;TB_cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>)
<span class="kw">head</span>(TBcases_sep)</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year TB_cases population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;     
## 1 Afghanistan  1999 745      19987071  
## 2 Afghanistan  2000 2666     20595360  
## 3 Brazil       1999 37737    172006362 
## 4 Brazil       2000 80488    174504898 
## 5 China        1999 212258   1272915272
## 6 China        2000 213766   1280428583</code></pre>
<p>Notice that the new columns are listed as character vectors, even though they are numeric. We can tell R to convert the resulting columns using the command <code>convert=TRUE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">TBcases_sep &lt;-<span class="st"> </span>TBcases <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(<span class="st">&quot;rate&quot;</span>, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;TB_cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>, <span class="dt">convert=</span><span class="ot">TRUE</span>)
<span class="kw">head</span>(TBcases_sep)</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year TB_cases population
##   &lt;chr&gt;       &lt;int&gt;    &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999      745   19987071
## 2 Afghanistan  2000     2666   20595360
## 3 Brazil       1999    37737  172006362
## 4 Brazil       2000    80488  174504898
## 5 China        1999   212258 1272915272
## 6 China        2000   213766 1280428583</code></pre>
<p>If we want to return to the initial form, we can combine the variables back into one using <code>unite()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">TBcases_united &lt;-<span class="st"> </span>TBcases_sep <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unite</span>(<span class="dt">col=</span><span class="st">&quot;rate&quot;</span>, <span class="st">&quot;TB_cases&quot;</span>, <span class="st">&quot;population&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>)
<span class="kw">head</span>(TBcases_united)</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country      year rate             
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
</div>
<div id="practice-2.3.4" class="section level3 unnumbered">
<h3>Practice 2.3.4</h3>
<p>The GDP growth dataset contains each country's annual GDP growth in each year since 1800. The data are in a format where columns represent years.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GDP_Growth &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/AndrewjSage/andrewjsage.github.io/master/Datasets/gdp_total_yearly_growth.csv&quot;</span>)</code></pre></div>
<p>Suppose we wanted to plot a country's GDP growth over time. Why wouldn't we be able to do that with the data in its current form?</p>
<p>Reshape the data into a format with three columns: <code>country</code>, <code>year</code>, and <code>GDP_Growth</code>.</p>
<p>Hint: you can reference all columns between 1801 and 2013, using `c(&quot;1801&quot;:&quot;2013&quot;).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#type code here. </span></code></pre></div>
<p>You should notice that the <code>year</code> variable is stored as a character. Convert it to an integer using the command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GDP_Growth &lt;-<span class="st"> </span>GDP_Growth <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year=</span><span class="kw">as.integer</span>(year))</code></pre></div>
<p>Now plot GPD_Growth by year for Brazil, China, India, the United States, and Vietnam. Use a line graph to connect the points.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#type code here</span></code></pre></div>
<p>Create a .csv file containing the new version of the dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#type code here</span></code></pre></div>
</div>
<div id="practice-2.3.5" class="section level3 unnumbered">
<h3>Practice 2.3.5</h3>
<p>The <code>fish_encounters</code> dataset contains data on fish migration along a river. Sensors were setup at multiple stations along the river, and the data show whether the fish was observed at each station. Notice that there are many rows for each fish, corresponding to each station where the fish was observed. If a fish was not observed at a station, then that row is omitted from the dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;fish_encounters&quot;</span>)
<span class="kw">head</span>(fish_encounters)</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   fish  station  seen
##   &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;
## 1 4842  Release     1
## 2 4842  I80_1       1
## 3 4842  Lisbon      1
## 4 4842  Rstr        1
## 5 4842  Base_TD     1
## 6 4842  BCE         1</code></pre>
<p>Reshape the data so that each fish has exactly one row in the data, columns correspond to the different stations, and the entry in the cell correponding to a fish and station has value 1 if the fish was seen at that station. (See illustration.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Type code here</span></code></pre></div>
<p>If we add <code>values_fill = 0</code> in the pivot command, NA's will be replaced with 0's.</p>
</div>
<div id="practice-2.3.6" class="section level3 unnumbered">
<h3>Practice 2.3.6</h3>
<p>The following code scrapes the Milwaukee Bucks roster from <code>espn.com</code>. We'll learn about how to scrape data from the web later in the term.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rvest)
page &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;https://www.espn.com/nba/team/roster/_/name/mil&quot;</span>)
table &lt;-<span class="st"> </span>page <span class="op">%&gt;%</span>
<span class="kw">html_elements</span>(<span class="st">&quot;table&quot;</span>) <span class="op">%&gt;%</span>
<span class="kw">html_table</span>()
Bucks &lt;-<span class="st"> </span>table[[<span class="dv">1</span>]]
Bucks</code></pre></div>
<pre><code>## # A tibble: 18 x 8
##    ``    Name                POS     Age HT       WT      College      Salary   
##    &lt;lgl&gt; &lt;chr&gt;               &lt;chr&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;    
##  1 NA    Grayson Allen7      SG       26 &quot;6&#39; 4\&quot;&quot; 198 lbs Duke         $4,054,6…
##  2 NA    Giannis Antetokoun… PF       27 &quot;6&#39; 11\… 242 lbs --           $39,344,…
##  3 NA    Thanasis Antetokou… SF       29 &quot;6&#39; 6\&quot;&quot; 219 lbs --           $1,669,1…
##  4 NA    DeAndre&#39; Bembry95   SG       27 &quot;6&#39; 5\&quot;&quot; 210 lbs Saint Josep… $1,669,1…
##  5 NA    Pat Connaughton24   SG       29 &quot;6&#39; 5\&quot;&quot; 209 lbs Notre Dame   $5,333,3…
##  6 NA    Jeff Dowtin15       PG       24 &quot;6&#39; 3\&quot;&quot; 177 lbs Rhode Island --       
##  7 NA    Langston Galloway12 SG       30 &quot;6&#39; 1\&quot;&quot; 200 lbs Saint Josep… --       
##  8 NA    George Hill3        PG       35 &quot;6&#39; 4\&quot;&quot; 188 lbs IUPUI        $4,000,0…
##  9 NA    Jrue Holiday21      PG       31 &quot;6&#39; 3\&quot;&quot; 205 lbs UCLA         $32,413,…
## 10 NA    Serge Ibaka25       C        32 &quot;6&#39; 10\… 235 lbs --           $9,720,9…
## 11 NA    Brook Lopez11       C        33 &quot;7&#39; 0\&quot;&quot; 282 lbs Stanford     $13,302,…
## 12 NA    Sandro Mamukelashv… PF       22 &quot;6&#39; 9\&quot;&quot; 240 lbs Seton Hall   --       
## 13 NA    Wesley Matthews23   SG       35 &quot;6&#39; 4\&quot;&quot; 220 lbs Marquette    $1,237,4…
## 14 NA    Khris Middleton22   SF       30 &quot;6&#39; 7\&quot;&quot; 222 lbs Texas A&amp;M    $35,500,…
## 15 NA    Greg Monroe15       C        31 &quot;6&#39; 10\… 250 lbs Georgetown   --       
## 16 NA    Jordan Nwora13      SF       23 &quot;6&#39; 8\&quot;&quot; 225 lbs Louisville   $1,517,9…
## 17 NA    Bobby Portis9       C        27 &quot;6&#39; 10\… 250 lbs Arkansas     $4,347,6…
## 18 NA    Lindell Wigginton28 G        23 &quot;6&#39; 1\&quot;&quot; 189 lbs Iowa State   --</code></pre>
<p>Notice that the <code>HT</code> variable includes both feet and inches, separated by the ' symbol.</p>
<p>We'll want to separate the <code>HT</code> variable into two separate numeric variables, <code>FT</code> and <code>IN</code>.</p>
<p>First, we'll remove the &quot; symbol after inches, using the code below. You'll learn more about the <code>str_replace()</code> function soon.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Bucks<span class="op">$</span>HT &lt;-<span class="st"> </span><span class="kw">str_replace</span>(Bucks<span class="op">$</span>HT, <span class="st">&#39;&quot;&#39;</span>, <span class="st">&quot;&quot;</span>)
Bucks</code></pre></div>
<pre><code>## # A tibble: 18 x 8
##    ``    Name                  POS     Age HT    WT      College      Salary    
##    &lt;lgl&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;     
##  1 NA    Grayson Allen7        SG       26 6&#39; 4  198 lbs Duke         $4,054,695
##  2 NA    Giannis Antetokounmp… PF       27 6&#39; 11 242 lbs --           $39,344,9…
##  3 NA    Thanasis Antetokounm… SF       29 6&#39; 6  219 lbs --           $1,669,178
##  4 NA    DeAndre&#39; Bembry95     SG       27 6&#39; 5  210 lbs Saint Josep… $1,669,178
##  5 NA    Pat Connaughton24     SG       29 6&#39; 5  209 lbs Notre Dame   $5,333,334
##  6 NA    Jeff Dowtin15         PG       24 6&#39; 3  177 lbs Rhode Island --        
##  7 NA    Langston Galloway12   SG       30 6&#39; 1  200 lbs Saint Josep… --        
##  8 NA    George Hill3          PG       35 6&#39; 4  188 lbs IUPUI        $4,000,000
##  9 NA    Jrue Holiday21        PG       31 6&#39; 3  205 lbs UCLA         $32,413,3…
## 10 NA    Serge Ibaka25         C        32 6&#39; 10 235 lbs --           $9,720,900
## 11 NA    Brook Lopez11         C        33 7&#39; 0  282 lbs Stanford     $13,302,3…
## 12 NA    Sandro Mamukelashvil… PF       22 6&#39; 9  240 lbs Seton Hall   --        
## 13 NA    Wesley Matthews23     SG       35 6&#39; 4  220 lbs Marquette    $1,237,494
## 14 NA    Khris Middleton22     SF       30 6&#39; 7  222 lbs Texas A&amp;M    $35,500,0…
## 15 NA    Greg Monroe15         C        31 6&#39; 10 250 lbs Georgetown   --        
## 16 NA    Jordan Nwora13        SF       23 6&#39; 8  225 lbs Louisville   $1,517,981
## 17 NA    Bobby Portis9         C        27 6&#39; 10 250 lbs Arkansas     $4,347,600
## 18 NA    Lindell Wigginton28   G        23 6&#39; 1  189 lbs Iowa State   --</code></pre>
<p>Now, separate the <code>HT</code> variable into two variables, called <code>FT</code> and <code>IN</code>. Make sure they are both numeric variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Type code here</span></code></pre></div>
</div>
</div>
<div id="joining-data" class="section level2">
<h2><span class="header-section-number">2.4</span> Joining Data</h2>
<div id="mutating-joins" class="section level3 unnumbered">
<h3>Mutating Joins</h3>
<p>A mutating join adds new variables to a dataframe by matching observations in another.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(Lock5Data)
<span class="kw">data</span>(AllCountries)
countries &lt;-<span class="st"> </span>AllCountries</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(countries)</code></pre></div>
<pre><code>## Rows: 217
## Columns: 26
## $ Country        &lt;fct&gt; &quot;Afghanistan&quot;, &quot;Albania&quot;, &quot;Algeria&quot;, &quot;American Samoa&quot;, …
## $ Code           &lt;fct&gt; AFG, ALB, DZA, ASM, AND, AGO, ATG, ARG, ARM, ABW, AUS, …
## $ LandArea       &lt;dbl&gt; 652.860, 27.400, 2381.740, 0.200, 0.470, 1246.700, 0.44…
## $ Population     &lt;dbl&gt; 37.172, 2.866, 42.228, 0.055, 0.077, 30.810, 0.096, 44.…
## $ Density        &lt;dbl&gt; 56.9, 104.6, 17.7, 277.3, 163.8, 24.7, 218.8, 16.3, 103…
## $ GDP            &lt;int&gt; 521, 5254, 4279, NA, 42030, 3432, 16864, 11653, 4212, N…
## $ Rural          &lt;dbl&gt; 74.5, 39.7, 27.4, 12.8, 11.9, 34.5, 75.4, 8.1, 36.9, 56…
## $ CO2            &lt;dbl&gt; 0.29, 1.98, 3.74, NA, 5.83, 1.29, 5.74, 4.78, 1.90, 8.4…
## $ PumpPrice      &lt;dbl&gt; 0.70, 1.36, 0.28, NA, NA, 0.97, NA, 1.10, 0.77, NA, 0.9…
## $ Military       &lt;dbl&gt; 3.72, 4.08, 13.81, NA, NA, 9.40, NA, 2.05, 20.86, NA, 5…
## $ Health         &lt;dbl&gt; 2.01, 9.51, 10.73, NA, 14.02, 5.43, 10.76, 13.56, 6.05,…
## $ ArmedForces    &lt;int&gt; 323, 9, 317, NA, NA, 117, 0, 105, 49, NA, 58, 21, 82, 1…
## $ Internet       &lt;dbl&gt; 11.4, 71.8, 47.7, NA, 98.9, 14.3, 76.0, 75.8, 69.7, 97.…
## $ Cell           &lt;dbl&gt; 67.4, 123.7, 111.0, NA, 104.4, 44.7, 180.4, 139.8, 119.…
## $ HIV            &lt;dbl&gt; NA, 0.1, 0.1, NA, NA, 1.9, NA, 0.4, 0.2, NA, 0.1, 0.1, …
## $ Hunger         &lt;dbl&gt; 30.3, 5.5, 4.7, NA, NA, 23.9, NA, 3.8, 4.3, NA, 2.5, 2.…
## $ Diabetes       &lt;dbl&gt; 9.6, 10.1, 6.7, NA, 8.0, 3.9, 13.2, 5.5, 7.1, 11.6, 5.1…
## $ BirthRate      &lt;dbl&gt; 32.5, 11.7, 22.3, NA, NA, 41.3, 16.1, 17.0, 13.1, 11.0,…
## $ DeathRate      &lt;dbl&gt; 6.6, 7.5, 4.8, NA, NA, 8.4, 5.8, 7.6, 9.7, 8.9, 6.5, 9.…
## $ ElderlyPop     &lt;dbl&gt; 2.6, 13.6, 6.4, NA, NA, 2.5, 7.2, 11.3, 11.4, 13.6, 15.…
## $ LifeExpectancy &lt;dbl&gt; 64.0, 78.5, 76.3, NA, NA, 61.8, 76.5, 76.7, 74.8, 76.0,…
## $ FemaleLabor    &lt;dbl&gt; 50.3, 55.9, 16.4, NA, NA, 76.4, NA, 57.1, 55.8, NA, 72.…
## $ Unemployment   &lt;dbl&gt; 1.5, 13.9, 12.1, NA, NA, 7.3, NA, 9.5, 17.7, NA, 5.4, 4…
## $ Energy         &lt;int&gt; NA, 808, 1328, NA, NA, 545, NA, 2030, 1016, NA, 5335, 3…
## $ Electricity    &lt;int&gt; NA, 2309, 1363, NA, NA, 312, NA, 3075, 1962, NA, 10071,…
## $ Developed      &lt;int&gt; NA, 1, 1, NA, NA, 1, NA, 2, 1, NA, 3, 3, 1, NA, 3, 1, N…</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(countries)</code></pre></div>
<pre><code>##          Country Code LandArea Population Density   GDP Rural  CO2 PumpPrice
## 1    Afghanistan  AFG   652.86     37.172    56.9   521  74.5 0.29      0.70
## 2        Albania  ALB    27.40      2.866   104.6  5254  39.7 1.98      1.36
## 3        Algeria  DZA  2381.74     42.228    17.7  4279  27.4 3.74      0.28
## 4 American Samoa  ASM     0.20      0.055   277.3    NA  12.8   NA        NA
## 5        Andorra  AND     0.47      0.077   163.8 42030  11.9 5.83        NA
## 6         Angola  AGO  1246.70     30.810    24.7  3432  34.5 1.29      0.97
##   Military Health ArmedForces Internet  Cell HIV Hunger Diabetes BirthRate
## 1     3.72   2.01         323     11.4  67.4  NA   30.3      9.6      32.5
## 2     4.08   9.51           9     71.8 123.7 0.1    5.5     10.1      11.7
## 3    13.81  10.73         317     47.7 111.0 0.1    4.7      6.7      22.3
## 4       NA     NA          NA       NA    NA  NA     NA       NA        NA
## 5       NA  14.02          NA     98.9 104.4  NA     NA      8.0        NA
## 6     9.40   5.43         117     14.3  44.7 1.9   23.9      3.9      41.3
##   DeathRate ElderlyPop LifeExpectancy FemaleLabor Unemployment Energy
## 1       6.6        2.6           64.0        50.3          1.5     NA
## 2       7.5       13.6           78.5        55.9         13.9    808
## 3       4.8        6.4           76.3        16.4         12.1   1328
## 4        NA         NA             NA          NA           NA     NA
## 5        NA         NA             NA          NA           NA     NA
## 6       8.4        2.5           61.8        76.4          7.3    545
##   Electricity Developed
## 1          NA        NA
## 2        2309         1
## 3        1363         1
## 4          NA        NA
## 5          NA        NA
## 6         312         1</code></pre>
<p>Let's graph each country's life expectancy against its GDP, as we saw in the GapMinder graphic.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>countries) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">y=</span>LifeExpectancy, <span class="dt">x=</span>GDP, <span class="dt">size=</span>Population)) <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&#39;log2&#39;</span>)</code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-112-1.png" width="576" /></p>
<p>We cannot color by continent because continent is not a variable in our dataset. Fortunately, we can find the countries in each continent from another source.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">continents &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/dbouquin/IS_608/master/NanosatDB_munging/Countries-Continents.csv&quot;</span>)
<span class="kw">glimpse</span>(continents)</code></pre></div>
<pre><code>## Rows: 194
## Columns: 2
## $ Continent &lt;chr&gt; &quot;Africa&quot;, &quot;Africa&quot;, &quot;Africa&quot;, &quot;Africa&quot;, &quot;Africa&quot;, &quot;Africa&quot;, …
## $ Country   &lt;chr&gt; &quot;Algeria&quot;, &quot;Angola&quot;, &quot;Benin&quot;, &quot;Botswana&quot;, &quot;Burkina&quot;, &quot;Burund…</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(continents)</code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   Continent Country 
##   &lt;chr&gt;     &lt;chr&gt;   
## 1 Africa    Algeria 
## 2 Africa    Angola  
## 3 Africa    Benin   
## 4 Africa    Botswana
## 5 Africa    Burkina 
## 6 Africa    Burundi</code></pre>
<p>In order to join the dataframes together, we need a <strong>key</strong>. A <strong>key</strong> is a variable, or set of variables, that uniquely identifies an observation. Keys are used to match observations.</p>
<p>Used to connect two data tables</p>
<ul>
<li><p><strong>primary key</strong> uniquely identifies an observation in its own table</p></li>
<li><p><strong>foreign key</strong> uniquely identifies an observation in another table</p></li>
</ul>
<p>There are four different kinds of mutating joins in R.</p>
<ol style="list-style-type: decimal">
<li><p><code>inner_join</code> matches pairs of observations when their keys are equal. The new dataframe contains only observations that were contained in both of the original ones.</p></li>
<li><p><code>left_join</code> keeps all observations from the left (x) table. Those not matched return NA's for the variables in the y-table.</p></li>
<li><p><code>right_join</code> keeps all observations from the right (y) table. Those not matched return NA's for the variables in the x-table.</p></li>
<li><p><code>full_join</code> keeps all observations in both tables. Those not matched return NA's for variables in the other table.</p></li>
</ol>
<p><strong>Inner</strong></p>
<div class="figure">
<img src="http://r4ds.had.co.nz/diagrams/join-inner.png" alt="inner join illustration" />
<p class="caption">inner join illustration</p>
</div>
<div class="figure">
<img src="http://r4ds.had.co.nz/diagrams/join-outer.png" alt="outer join illustration" />
<p class="caption">outer join illustration</p>
</div>
</div>
<div id="example-2.4.1-joining-countries-and-continents" class="section level3 unnumbered">
<h3>Example 2.4.1 Joining countries and continents</h3>
<ol style="list-style-type: lower-alpha">
<li>Using <code>inner_join</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries_inner &lt;-<span class="st"> </span>countries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inner_join</span>(continents, <span class="dt">by=</span><span class="st">&quot;Country&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Country, Continent, <span class="kw">everything</span>())
<span class="kw">head</span>(countries_inner)</code></pre></div>
<pre><code>##               Country     Continent Code LandArea Population Density   GDP
## 1         Afghanistan          Asia  AFG   652.86     37.172    56.9   521
## 2             Albania        Europe  ALB    27.40      2.866   104.6  5254
## 3             Algeria        Africa  DZA  2381.74     42.228    17.7  4279
## 4             Andorra        Europe  AND     0.47      0.077   163.8 42030
## 5              Angola        Africa  AGO  1246.70     30.810    24.7  3432
## 6 Antigua and Barbuda North America  ATG     0.44      0.096   218.8 16864
##   Rural  CO2 PumpPrice Military Health ArmedForces Internet  Cell HIV Hunger
## 1  74.5 0.29      0.70     3.72   2.01         323     11.4  67.4  NA   30.3
## 2  39.7 1.98      1.36     4.08   9.51           9     71.8 123.7 0.1    5.5
## 3  27.4 3.74      0.28    13.81  10.73         317     47.7 111.0 0.1    4.7
## 4  11.9 5.83        NA       NA  14.02          NA     98.9 104.4  NA     NA
## 5  34.5 1.29      0.97     9.40   5.43         117     14.3  44.7 1.9   23.9
## 6  75.4 5.74        NA       NA  10.76           0     76.0 180.4  NA     NA
##   Diabetes BirthRate DeathRate ElderlyPop LifeExpectancy FemaleLabor
## 1      9.6      32.5       6.6        2.6           64.0        50.3
## 2     10.1      11.7       7.5       13.6           78.5        55.9
## 3      6.7      22.3       4.8        6.4           76.3        16.4
## 4      8.0        NA        NA         NA             NA          NA
## 5      3.9      41.3       8.4        2.5           61.8        76.4
## 6     13.2      16.1       5.8        7.2           76.5          NA
##   Unemployment Energy Electricity Developed
## 1          1.5     NA          NA        NA
## 2         13.9    808        2309         1
## 3         12.1   1328        1363         1
## 4           NA     NA          NA        NA
## 5          7.3    545         312         1
## 6           NA     NA          NA        NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(countries_inner)</code></pre></div>
<pre><code>## [1] 165  27</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li>Using <code>left_join</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries_left &lt;-<span class="st"> </span>countries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(continents, <span class="dt">by=</span><span class="st">&quot;Country&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Country, Continent, <span class="kw">everything</span>())
<span class="kw">head</span>(countries_left)</code></pre></div>
<pre><code>##          Country Continent Code LandArea Population Density   GDP Rural  CO2
## 1    Afghanistan      Asia  AFG   652.86     37.172    56.9   521  74.5 0.29
## 2        Albania    Europe  ALB    27.40      2.866   104.6  5254  39.7 1.98
## 3        Algeria    Africa  DZA  2381.74     42.228    17.7  4279  27.4 3.74
## 4 American Samoa      &lt;NA&gt;  ASM     0.20      0.055   277.3    NA  12.8   NA
## 5        Andorra    Europe  AND     0.47      0.077   163.8 42030  11.9 5.83
## 6         Angola    Africa  AGO  1246.70     30.810    24.7  3432  34.5 1.29
##   PumpPrice Military Health ArmedForces Internet  Cell HIV Hunger Diabetes
## 1      0.70     3.72   2.01         323     11.4  67.4  NA   30.3      9.6
## 2      1.36     4.08   9.51           9     71.8 123.7 0.1    5.5     10.1
## 3      0.28    13.81  10.73         317     47.7 111.0 0.1    4.7      6.7
## 4        NA       NA     NA          NA       NA    NA  NA     NA       NA
## 5        NA       NA  14.02          NA     98.9 104.4  NA     NA      8.0
## 6      0.97     9.40   5.43         117     14.3  44.7 1.9   23.9      3.9
##   BirthRate DeathRate ElderlyPop LifeExpectancy FemaleLabor Unemployment Energy
## 1      32.5       6.6        2.6           64.0        50.3          1.5     NA
## 2      11.7       7.5       13.6           78.5        55.9         13.9    808
## 3      22.3       4.8        6.4           76.3        16.4         12.1   1328
## 4        NA        NA         NA             NA          NA           NA     NA
## 5        NA        NA         NA             NA          NA           NA     NA
## 6      41.3       8.4        2.5           61.8        76.4          7.3    545
##   Electricity Developed
## 1          NA        NA
## 2        2309         1
## 3        1363         1
## 4          NA        NA
## 5          NA        NA
## 6         312         1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(countries_left)</code></pre></div>
<pre><code>## [1] 217  27</code></pre>
<ol start="3" style="list-style-type: lower-alpha">
<li>Using <code>right_join</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries_right &lt;-<span class="st"> </span>countries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">right_join</span>(continents, <span class="dt">by=</span><span class="st">&quot;Country&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Country, Continent, <span class="kw">everything</span>())
<span class="kw">head</span>(countries_right)</code></pre></div>
<pre><code>##               Country     Continent Code LandArea Population Density   GDP
## 1         Afghanistan          Asia  AFG   652.86     37.172    56.9   521
## 2             Albania        Europe  ALB    27.40      2.866   104.6  5254
## 3             Algeria        Africa  DZA  2381.74     42.228    17.7  4279
## 4             Andorra        Europe  AND     0.47      0.077   163.8 42030
## 5              Angola        Africa  AGO  1246.70     30.810    24.7  3432
## 6 Antigua and Barbuda North America  ATG     0.44      0.096   218.8 16864
##   Rural  CO2 PumpPrice Military Health ArmedForces Internet  Cell HIV Hunger
## 1  74.5 0.29      0.70     3.72   2.01         323     11.4  67.4  NA   30.3
## 2  39.7 1.98      1.36     4.08   9.51           9     71.8 123.7 0.1    5.5
## 3  27.4 3.74      0.28    13.81  10.73         317     47.7 111.0 0.1    4.7
## 4  11.9 5.83        NA       NA  14.02          NA     98.9 104.4  NA     NA
## 5  34.5 1.29      0.97     9.40   5.43         117     14.3  44.7 1.9   23.9
## 6  75.4 5.74        NA       NA  10.76           0     76.0 180.4  NA     NA
##   Diabetes BirthRate DeathRate ElderlyPop LifeExpectancy FemaleLabor
## 1      9.6      32.5       6.6        2.6           64.0        50.3
## 2     10.1      11.7       7.5       13.6           78.5        55.9
## 3      6.7      22.3       4.8        6.4           76.3        16.4
## 4      8.0        NA        NA         NA             NA          NA
## 5      3.9      41.3       8.4        2.5           61.8        76.4
## 6     13.2      16.1       5.8        7.2           76.5          NA
##   Unemployment Energy Electricity Developed
## 1          1.5     NA          NA        NA
## 2         13.9    808        2309         1
## 3         12.1   1328        1363         1
## 4           NA     NA          NA        NA
## 5          7.3    545         312         1
## 6           NA     NA          NA        NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(countries_right)</code></pre></div>
<pre><code>## [1] 194  27</code></pre>
<ol start="4" style="list-style-type: lower-alpha">
<li>Using <code>full_join</code></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries_full &lt;-<span class="st"> </span>countries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">full_join</span>(continents, <span class="dt">by=</span><span class="st">&quot;Country&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Country, Continent, <span class="kw">everything</span>())
<span class="kw">head</span>(countries_full)</code></pre></div>
<pre><code>##          Country Continent Code LandArea Population Density   GDP Rural  CO2
## 1    Afghanistan      Asia  AFG   652.86     37.172    56.9   521  74.5 0.29
## 2        Albania    Europe  ALB    27.40      2.866   104.6  5254  39.7 1.98
## 3        Algeria    Africa  DZA  2381.74     42.228    17.7  4279  27.4 3.74
## 4 American Samoa      &lt;NA&gt;  ASM     0.20      0.055   277.3    NA  12.8   NA
## 5        Andorra    Europe  AND     0.47      0.077   163.8 42030  11.9 5.83
## 6         Angola    Africa  AGO  1246.70     30.810    24.7  3432  34.5 1.29
##   PumpPrice Military Health ArmedForces Internet  Cell HIV Hunger Diabetes
## 1      0.70     3.72   2.01         323     11.4  67.4  NA   30.3      9.6
## 2      1.36     4.08   9.51           9     71.8 123.7 0.1    5.5     10.1
## 3      0.28    13.81  10.73         317     47.7 111.0 0.1    4.7      6.7
## 4        NA       NA     NA          NA       NA    NA  NA     NA       NA
## 5        NA       NA  14.02          NA     98.9 104.4  NA     NA      8.0
## 6      0.97     9.40   5.43         117     14.3  44.7 1.9   23.9      3.9
##   BirthRate DeathRate ElderlyPop LifeExpectancy FemaleLabor Unemployment Energy
## 1      32.5       6.6        2.6           64.0        50.3          1.5     NA
## 2      11.7       7.5       13.6           78.5        55.9         13.9    808
## 3      22.3       4.8        6.4           76.3        16.4         12.1   1328
## 4        NA        NA         NA             NA          NA           NA     NA
## 5        NA        NA         NA             NA          NA           NA     NA
## 6      41.3       8.4        2.5           61.8        76.4          7.3    545
##   Electricity Developed
## 1          NA        NA
## 2        2309         1
## 3        1363         1
## 4          NA        NA
## 5          NA        NA
## 6         312         1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(countries_full)</code></pre></div>
<pre><code>## [1] 246  27</code></pre>
<p>We'll create a new .csv file with the dataset we created.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(countries_full, <span class="dt">file=</span><span class="st">&quot;Countries_Full.csv&quot;</span>)</code></pre></div>
<p>**<a href="Notes:**" class="uri">Notes:**</a><br />
* If we do not specify a <code>by</code> argument, R will join datasets using a key consisting of all varaibles that appear in both datasets.</p>
<ul>
<li>If the datasets use different names for the same variable, join using <code>by=c(&quot;variablename_x&quot;= &quot;variablename_y&quot;)</code>. For example, if the variable <code>Country</code> were instead called <code>country</code> in the <code>countries</code> dataset and <code>ctry</code> in the <code>Continents</code> dataset, we would use <code>inner_join(countries, continents, by=c(&quot;country&quot;=&quot;ctry&quot;))</code>.</li>
</ul>
<p>We create two small fictional datasets. <code>Students</code> contains a list of fictional student id's, and the courses the students are enrolled in. Note there is a separate line for each course. <code>Costs</code> contains the total cost of textbooks and other materials for each course.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">id &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10576</span>, <span class="dv">10576</span>, <span class="dv">10576</span>, <span class="dv">11439</span>, <span class="dv">11439</span>, <span class="dv">19857</span>, <span class="dv">11306</span>, <span class="dv">11306</span>, <span class="dv">12576</span>, <span class="dv">12576</span>)
course &lt;-<span class="kw">c</span>(<span class="st">&quot;Calculus&quot;</span>, <span class="st">&quot;Art&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Calculus&quot;</span>, <span class="st">&quot;Shakespeare&quot;</span>, <span class="st">&quot;History&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Statistics&quot;</span>, <span class="st">&quot;Art&quot;</span>, <span class="st">&quot;Shakespeare&quot;</span>)
Students &lt;-<span class="st"> </span><span class="kw">data.frame</span>(id, course)
Students</code></pre></div>
<pre><code>##       id      course
## 1  10576    Calculus
## 2  10576         Art
## 3  10576   Economics
## 4  11439    Calculus
## 5  11439 Shakespeare
## 6  19857     History
## 7  11306   Economics
## 8  11306  Statistics
## 9  12576         Art
## 10 12576 Shakespeare</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">course &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Calculus&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Shakespeare&quot;</span>, <span class="st">&quot;History&quot;</span>, <span class="st">&quot;Engineering&quot;</span>)
book_cost &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">90</span>, <span class="dv">75</span>, <span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">100</span>)
Costs &lt;-<span class="st"> </span><span class="kw">data.frame</span>(course, book_cost)
Costs</code></pre></div>
<pre><code>##        course book_cost
## 1    Calculus        90
## 2   Economics        75
## 3 Shakespeare        50
## 4     History        80
## 5 Engineering       100</code></pre>
</div>
<div id="practice-2.4.2" class="section level3 unnumbered">
<h3>Practice 2.4.2</h3>
<div id="use-one-of-the-join-commands-to-create-the-following-datasets." class="section level4">
<h4><span class="header-section-number">2.4.0.1</span> Use one of the join commands to create the following datasets.</h4>
</div>
<div id="a-a-dataset-whose-first-two-columns-are-identical-to-students-and-whose-third-column-contains-the-book_cost-for-each-course.-if-the-course-does-not-appear-in-the-costs-dataset-return-na." class="section level4">
<h4><span class="header-section-number">2.4.0.2</span> a) a dataset whose first two columns are identical to <code>Students</code>, and whose third column contains the <code>book_cost</code> for each course. If the course does not appear in the <code>Costs</code> dataset, return <code>NA</code>.</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Type code here</span></code></pre></div>
</div>
<div id="b-a-dataset-like-the-one-in-a-but-which-excludes-courses-whose-book-costs-are-not-listed" class="section level4">
<h4><span class="header-section-number">2.4.0.3</span> b) a dataset like the one in (a), but which excludes courses whose book costs are not listed</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Type code here</span></code></pre></div>
</div>
<div id="c-a-dataset-that-lists-each-course-in-the-costs-dataset-along-with-the-number-of-students-taking-the-course-and-the-cost-of-books.-hint-you-will-need-to-do-some-data-wrangling-before-joining-the-data." class="section level4">
<h4><span class="header-section-number">2.4.0.4</span> c) a dataset that lists each course in the <code>Costs</code> dataset along with the number of students taking the course, and the cost of books. Hint: you will need to do some data wrangling before joining the data.</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Type code here</span></code></pre></div>
</div>
</div>
<div id="filtering-joins" class="section level3 unnumbered">
<h3>Filtering Joins</h3>
<p>A filtering join filters observations from one data frame based on whether or not they match an observation in the other table.</p>
<p>There are two types of filtering joins:</p>
<ul>
<li><code>semi_join(x, y)</code> keeps all observations in dataframe <code>x</code> that have a match in dataframe <code>y</code><br />
<img src="http://r4ds.had.co.nz/diagrams/join-semi.png" alt="semi join illustration" /></li>
<li><code>anti_join(x, y)</code> drops all observations in dataframe <code>x</code> that have a match in dataframe <code>y</code>. <img src="http://r4ds.had.co.nz/diagrams/join-anti.png" alt="anti join illustration" /></li>
</ul>
<p>Anti-joins are useful for diagnosing join mismatches.</p>
</div>
<div id="example-2.4.3-joining-countries-and-continents" class="section level3 unnumbered">
<h3>Example 2.4.3 Joining countries and continents</h3>
<p>Use semi_join to create a dataset of all countries in continents whose total land area is greater than 20 million square km. (Note: land area is given in thousands of square km.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Large_Area &lt;-<span class="st"> </span>countries_full <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Continent) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total_area =</span> <span class="kw">sum</span>(LandArea, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(total_area <span class="op">&gt;</span><span class="st"> </span><span class="dv">20000</span>)
<span class="kw">head</span>(Large_Area)</code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   Continent total_area
##   &lt;chr&gt;          &lt;dbl&gt;
## 1 Africa        22777.
## 2 Asia          43510.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries_full <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">semi_join</span>(Large_Area) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre></div>
<pre><code>##       Country Continent Code LandArea Population Density   GDP Rural   CO2
## 1 Afghanistan      Asia  AFG  652.860     37.172    56.9   521  74.5  0.29
## 2     Algeria    Africa  DZA 2381.740     42.228    17.7  4279  27.4  3.74
## 3      Angola    Africa  AGO 1246.700     30.810    24.7  3432  34.5  1.29
## 4     Bahrain      Asia  BHR    0.778      1.569  2017.3 24051  10.7 23.46
## 5  Bangladesh      Asia  BGD  130.170    161.356  1239.6  1698  63.4  0.47
## 6       Benin    Africa  BEN  112.760     11.485   101.9   902  52.7  0.61
##   PumpPrice Military Health ArmedForces Internet  Cell HIV Hunger Diabetes
## 1      0.70     3.72   2.01         323     11.4  67.4  NA   30.3      9.6
## 2      0.28    13.81  10.73         317     47.7 111.0 0.1    4.7      6.7
## 3      0.97     9.40   5.43         117     14.3  44.7 1.9   23.9      3.9
## 4      0.43    10.93   8.41          19     95.9 158.4 0.1     NA     16.5
## 5      1.12    10.16   3.38         221     18.0  91.7 0.1   15.2      8.4
## 6      0.72     3.72   3.72          12     14.1  78.5 1.0   10.4      1.0
##   BirthRate DeathRate ElderlyPop LifeExpectancy FemaleLabor Unemployment Energy
## 1      32.5       6.6        2.6           64.0        50.3          1.5     NA
## 2      22.3       4.8        6.4           76.3        16.4         12.1   1328
## 3      41.3       8.4        2.5           61.8        76.4          7.3    545
## 4      14.4       2.4        2.4           77.0        46.1          1.0  10597
## 5      18.6       5.3        5.1           72.8        38.1          4.3    229
## 6      36.6       9.0        3.3           61.2        70.6          2.1    417
##   Electricity Developed
## 1          NA        NA
## 2        1363         1
## 3         312         1
## 4       19597         3
## 5         320         1
## 6         100         1</code></pre>
<p>Use anti-join to find the countries contained in the full-join of the datasets that are not contained in the inner-join.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries_full <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">anti_join</span>(countries_inner, <span class="dt">by=</span><span class="st">&quot;Country&quot;</span>)</code></pre></div>
<pre><code>##                             Country     Continent Code  LandArea Population
## 1                    American Samoa          &lt;NA&gt;  ASM    0.2000      0.055
## 2                             Aruba          &lt;NA&gt;  ABW    0.1800      0.106
## 3                      Bahamas, The          &lt;NA&gt;  BHS   10.0100      0.386
## 4                           Bermuda          &lt;NA&gt;  BMU    0.0540      0.064
## 5            British Virgin Islands          &lt;NA&gt;  VGB    0.1500      0.030
## 6                 Brunei Darussalam          &lt;NA&gt;  BRN    5.2700      0.429
## 7                      Burkina Faso          &lt;NA&gt;  BFA  273.6000     19.752
## 8                        Cabo Verde          &lt;NA&gt;  CPV    4.0300      0.544
## 9                    Cayman Islands          &lt;NA&gt;  CYM    0.2400      0.064
## 10                  Channel Islands          &lt;NA&gt;  CHI    0.1980      0.170
## 11                 Congo, Dem. Rep.          &lt;NA&gt;  COD 2267.0500     84.068
## 12                      Congo, Rep.          &lt;NA&gt;  COG  341.5000      5.244
## 13                    Cote d&#39;Ivoire          &lt;NA&gt;  CIV  318.0000     25.069
## 14                          Curacao          &lt;NA&gt;  CUW        NA      0.160
## 15                   Czech Republic          &lt;NA&gt;  CZE   77.2200     10.626
## 16                 Egypt, Arab Rep.          &lt;NA&gt;  EGY  995.4500     98.424
## 17                         Eswatini          &lt;NA&gt;  SWZ   17.2000      1.136
## 18                    Faroe Islands          &lt;NA&gt;  FRO    1.3960      0.048
## 19                 French Polynesia          &lt;NA&gt;  PYF    3.6600      0.278
## 20                      Gambia, The          &lt;NA&gt;  GMB   10.1200      2.280
## 21                        Gibraltar          &lt;NA&gt;  GIB    0.0100      0.034
## 22                        Greenland          &lt;NA&gt;  GRL  410.4500      0.056
## 23                             Guam          &lt;NA&gt;  GUM    0.5400      0.166
## 24             Hong Kong SAR, China          &lt;NA&gt;  HKG    1.0500      7.451
## 25               Iran, Islamic Rep.          &lt;NA&gt;  IRN 1628.7600     81.800
## 26                      Isle of Man          &lt;NA&gt;  IMN    0.5700      0.084
## 27        Korea, Dem. People&#39;s Rep.          &lt;NA&gt;  PRK  120.4100     25.550
## 28                      Korea, Rep.          &lt;NA&gt;  KOR   97.4890     51.635
## 29                           Kosovo          &lt;NA&gt;  XKX        NA      1.845
## 30                  Kyrgyz Republic          &lt;NA&gt;  KGZ  191.8000      6.316
## 31                          Lao PDR          &lt;NA&gt;  LAO  230.8000      7.062
## 32                 Macao SAR, China          &lt;NA&gt;  MAC    0.0304      0.632
## 33            Micronesia, Fed. Sts.          &lt;NA&gt;  FSM    0.7000      0.113
## 34                          Myanmar          &lt;NA&gt;  MMR  653.0800     53.708
## 35                    New Caledonia          &lt;NA&gt;  NCL   18.2800      0.284
## 36                  North Macedonia          &lt;NA&gt;  MKD   25.2200      2.083
## 37         Northern Mariana Islands          &lt;NA&gt;  MNP    0.4600      0.057
## 38                      Puerto Rico          &lt;NA&gt;  PRI    8.8700      3.195
## 39        Sint Maarten (Dutch part)          &lt;NA&gt;  SXM        NA      0.041
## 40                  Slovak Republic          &lt;NA&gt;  SVK   48.0800      5.447
## 41              St. Kitts and Nevis          &lt;NA&gt;  KNA    0.2600      0.052
## 42                        St. Lucia          &lt;NA&gt;  LCA    0.6100      0.182
## 43         St. Martin (French part)          &lt;NA&gt;  MAF        NA      0.037
## 44   St. Vincent and the Grenadines          &lt;NA&gt;  VCT    0.3900      0.110
## 45             Syrian Arab Republic          &lt;NA&gt;  SYR  183.6300     16.906
## 46                      Timor-Leste          &lt;NA&gt;  TLS   14.8700      1.268
## 47         Turks and Caicos Islands          &lt;NA&gt;  TCA    0.9500      0.038
## 48                    United States          &lt;NA&gt;  USA 9147.4200    327.167
## 49                    Venezuela, RB          &lt;NA&gt;  VEN  882.0500     28.870
## 50            Virgin Islands (U.S.)          &lt;NA&gt;  VIR    0.3500      0.107
## 51               West Bank and Gaza          &lt;NA&gt;  PSE    6.0200      4.569
## 52                      Yemen, Rep.          &lt;NA&gt;  YEM  527.9700     28.499
## 53                          Burkina        Africa &lt;NA&gt;        NA         NA
## 54                       Cape Verde        Africa &lt;NA&gt;        NA         NA
## 55                            Congo        Africa &lt;NA&gt;        NA         NA
## 56    Congo, Democratic Republic of        Africa &lt;NA&gt;        NA         NA
## 57                            Egypt        Africa &lt;NA&gt;        NA         NA
## 58                           Gambia        Africa &lt;NA&gt;        NA         NA
## 59                      Ivory Coast        Africa &lt;NA&gt;        NA         NA
## 60                        Swaziland        Africa &lt;NA&gt;        NA         NA
## 61                           Brunei          Asia &lt;NA&gt;        NA         NA
## 62                  Burma (Myanmar)          Asia &lt;NA&gt;        NA         NA
## 63                       East Timor          Asia &lt;NA&gt;        NA         NA
## 64                             Iran          Asia &lt;NA&gt;        NA         NA
## 65                     Korea, North          Asia &lt;NA&gt;        NA         NA
## 66                     Korea, South          Asia &lt;NA&gt;        NA         NA
## 67                       Kyrgyzstan          Asia &lt;NA&gt;        NA         NA
## 68                             Laos          Asia &lt;NA&gt;        NA         NA
## 69                            Syria          Asia &lt;NA&gt;        NA         NA
## 70                            Yemen          Asia &lt;NA&gt;        NA         NA
## 71                               CZ        Europe &lt;NA&gt;        NA         NA
## 72                        Macedonia        Europe &lt;NA&gt;        NA         NA
## 73                         Slovakia        Europe &lt;NA&gt;        NA         NA
## 74                     Vatican City        Europe &lt;NA&gt;        NA         NA
## 75                          Bahamas North America &lt;NA&gt;        NA         NA
## 76            Saint Kitts and Nevis North America &lt;NA&gt;        NA         NA
## 77                      Saint Lucia North America &lt;NA&gt;        NA         NA
## 78 Saint Vincent and the Grenadines North America &lt;NA&gt;        NA         NA
## 79                               US North America &lt;NA&gt;        NA         NA
## 80                       Micronesia       Oceania &lt;NA&gt;        NA         NA
## 81                        Venezuela South America &lt;NA&gt;        NA         NA
##    Density   GDP Rural   CO2 PumpPrice Military Health ArmedForces Internet
## 1    277.3    NA  12.8    NA        NA       NA     NA          NA       NA
## 2    588.0    NA  56.6  8.41        NA       NA     NA          NA     97.2
## 3     38.5    NA  17.0  6.52     0.920       NA  15.98           1     85.0
## 4   1184.6    NA   0.0  8.84        NA       NA     NA          NA     98.4
## 5    198.7    NA  52.3  6.20        NA       NA     NA          NA       NA
## 6     81.4 31628  22.4 22.23     0.370     7.80   5.69           8     94.9
## 7     72.2   731  70.6  0.16     0.980     8.01  11.03          11     15.9
## 8    134.9  3654  34.3  0.95     1.020     1.76   9.89           1     57.2
## 9    267.4    NA   0.0  8.92        NA       NA     NA          NA     81.1
## 10   861.1    NA  69.1    NA        NA       NA     NA          NA       NA
## 11    37.1   562  55.5  0.06     1.490     5.47   3.73         134      8.6
## 12    15.4  2148  33.1  0.65     0.970    10.44   3.92          12      8.7
## 13    78.8  1716  49.2  0.49     0.930     5.98   4.88          27     43.8
## 14      NA    NA  10.9 37.73        NA       NA     NA          NA       NA
## 15   137.6 22973  26.2  9.17     1.170     2.76  14.83          23     78.7
## 16    98.9  2549  57.3  2.23     0.400     4.14   4.22         836     45.0
## 17    66.1  4140  76.2  1.10     0.770     5.25  15.23          NA     30.3
## 18    34.7    NA  57.9 12.46        NA       NA     NA          NA     97.6
## 19    75.9    NA  38.2  2.96        NA       NA     NA          NA     72.7
## 20   225.3   712  38.7  0.25     1.180     3.31   2.76           1     19.8
## 21  3371.8    NA   0.0 15.66        NA       NA     NA          NA       NA
## 22     0.1    NA  13.2  8.99        NA       NA     NA          NA     69.5
## 23   307.0    NA   5.2    NA        NA       NA     NA          NA     80.5
## 24  7096.2 48717   0.0  6.39     1.860       NA     NA          NA     89.4
## 25    50.2    NA  25.1  8.38     0.399    15.78  22.60         563     60.4
## 26   147.5    NA  47.4    NA        NA       NA     NA          NA       NA
## 27   212.2    NA  38.1  1.62     0.580       NA     NA        1469       NA
## 28   529.7 31363  18.5 11.57     1.220    12.35  13.45         634     95.1
## 29      NA  4281    NA    NA     1.110     2.67     NA          NA       NA
## 30    32.9  1281  63.6  1.65     0.560     4.39   6.60          21     38.2
## 31    30.6  2568  65.0  0.29     0.930       NA   3.74         129     25.5
## 32 20777.5 86355   0.0  2.17        NA       NA     NA          NA     83.2
## 33   160.9  3058  77.3  1.40        NA       NA   5.73          NA     35.3
## 34    82.2  1326  69.4  0.41     0.540    15.20   4.79         513     30.7
## 35    15.5    NA  29.3 16.01        NA       NA     NA          NA     82.0
## 36    82.6  6084  42.0  3.61     1.110     3.06  13.05          16     76.3
## 37   123.7    NA   8.4    NA        NA       NA     NA          NA       NA
## 38   360.2 31651   6.4    NA        NA       NA     NA          NA     72.8
## 39      NA    NA   0.0 19.46        NA       NA     NA          NA       NA
## 40   113.3 19547  46.3  5.66     1.320     3.01  13.71          16     81.6
## 41   201.7 19829  69.2  4.55        NA       NA   8.15          NA     80.7
## 42   298.2 10315  81.3  2.28        NA       NA   8.46          NA     50.8
## 43      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 44   282.6  7378  47.8  1.92        NA       NA   9.56          NA     65.6
## 45    92.1    NA  45.8  1.64        NA       NA     NA         239     34.3
## 46    85.3  2036  69.4  0.40     1.100     1.41   3.22           2     27.5
## 47    39.6 27142   6.9  5.81        NA       NA     NA          NA       NA
## 48    35.8 62641  17.7 16.50     0.710     9.01  39.46        1359     75.2
## 49    32.7    NA  11.8  6.16        NA       NA   1.86         343     64.3
## 50   305.6    NA   4.3    NA        NA       NA     NA          NA     64.4
## 51   759.0  3199  23.8    NA     1.540       NA     NA          NA     65.2
## 52    54.0   944  63.4  0.88     0.920       NA   0.00          40     26.7
## 53      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 54      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 55      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 56      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 57      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 58      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 59      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 60      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 61      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 62      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 63      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 64      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 65      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 66      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 67      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 68      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 69      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 70      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 71      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 72      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 73      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 74      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 75      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 76      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 77      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 78      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 79      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 80      NA    NA    NA    NA        NA       NA     NA          NA       NA
## 81      NA    NA    NA    NA        NA       NA     NA          NA       NA
##     Cell  HIV Hunger Diabetes BirthRate DeathRate ElderlyPop LifeExpectancy
## 1     NA   NA     NA       NA        NA        NA         NA             NA
## 2     NA   NA     NA     11.6      11.0       8.9       13.6           76.0
## 3   89.4  1.9     NA     13.2      14.1       6.4        9.4           75.8
## 4  105.9   NA     NA     13.0       9.3       7.8         NA           81.4
## 5     NA   NA     NA     13.7        NA        NA         NA             NA
## 6  127.1   NA    2.6     12.8      15.6       3.6        4.9           77.4
## 7   93.5  0.8   21.3      2.4      38.4       8.3        2.4           60.8
## 8  112.1  0.6   12.3      2.4      20.7       5.4        4.5           73.0
## 9  157.0   NA     NA     13.2       9.9       3.4         NA             NA
## 10    NA   NA     NA      4.3       9.3       9.0       18.4           81.3
## 11  43.5  0.7     NA      6.1      41.7       9.7        3.0           60.0
## 12  96.1  3.1   37.5      7.2      34.1       7.1        3.4           65.1
## 13 130.7  2.8   20.7      2.4      36.6      11.9        2.9           54.1
## 14 116.6   NA     NA     11.6       9.7       8.9       16.8           78.0
## 15 119.0  0.1    2.5      6.8      10.8      10.5       19.5           79.5
## 16 105.5  0.1    4.8     17.3      25.7       5.9        5.2           71.7
## 17  76.9 27.4   20.7      3.9      28.4       9.4        3.2           58.3
## 18 114.2   NA     NA       NA      13.1       8.9         NA           82.4
## 19 101.7   NA    4.4     22.6      15.2       5.5        8.1           77.0
## 20 141.2  1.6    9.6      1.9      39.0       7.9        2.4           61.4
## 21 118.7   NA     NA       NA        NA        NA         NA             NA
## 22    NA   NA     NA      2.2      15.2       8.9         NA             NA
## 23    NA   NA     NA     21.5      16.7       5.1        9.9           79.8
## 24 249.8   NA    2.5      8.3       7.7       6.3       16.9           84.7
## 25 107.2  0.1    4.9      9.6      15.9       4.5        5.7           76.2
## 26    NA   NA     NA       NA        NA        NA         NA             NA
## 27  14.9   NA   43.4      4.0      13.8       9.0        9.3           71.9
## 28 124.9   NA    2.5      6.8       7.0       5.6       14.4           82.6
## 29    NA   NA     NA       NA      16.4       7.0         NA           71.9
## 30 121.9  0.2    6.5      7.1      24.8       5.4        4.7           71.2
## 31  54.1  0.3   16.6      4.0      23.4       6.6        4.1           67.0
## 32 328.8   NA   11.4       NA      12.2       3.9       10.5           84.0
## 33  21.9   NA     NA     12.0      23.8       6.2        5.1           69.3
## 34  89.8  0.7   10.5      4.6      17.6       8.2        6.0           66.7
## 35    NA   NA   11.6     23.4      14.5       5.5       10.1           77.1
## 36  96.4  0.1    4.1     10.1      11.2       9.9       13.7           75.9
## 37    NA   NA     NA       NA        NA        NA         NA             NA
## 38  92.5   NA     NA     12.9       7.3       8.9       15.5           80.0
## 39    NA   NA     NA       NA        NA        NA         NA             NA
## 40 130.7  0.1    2.7      7.3      10.7       9.9       15.6           77.2
## 41 138.9   NA     NA     12.8        NA        NA         NA             NA
## 42  98.8   NA     NA     11.6      12.0       7.5        9.9           75.7
## 43    NA   NA     NA       NA      14.9       4.3         NA           79.7
## 44 105.4   NA    5.7     11.6      15.2       7.3        8.0           73.3
## 45  84.2   NA     NA      8.2      20.9       5.4        4.5           71.0
## 46 120.1   NA   27.2      6.9      34.6       5.4        3.6           69.2
## 47    NA   NA     NA       NA        NA        NA         NA             NA
## 48 120.7   NA    2.5     10.8      11.8       8.5       15.8           78.5
## 49  78.5   NA   11.7      6.5      18.7       5.7        6.8           74.7
## 50    NA   NA     NA     12.3      12.8       7.8       19.1           79.4
## 51  81.2   NA     NA     10.6      31.4       3.5        3.1           73.6
## 52  54.4   NA   34.4      5.4      31.0       6.4        2.9           65.2
## 53    NA   NA     NA       NA        NA        NA         NA             NA
## 54    NA   NA     NA       NA        NA        NA         NA             NA
## 55    NA   NA     NA       NA        NA        NA         NA             NA
## 56    NA   NA     NA       NA        NA        NA         NA             NA
## 57    NA   NA     NA       NA        NA        NA         NA             NA
## 58    NA   NA     NA       NA        NA        NA         NA             NA
## 59    NA   NA     NA       NA        NA        NA         NA             NA
## 60    NA   NA     NA       NA        NA        NA         NA             NA
## 61    NA   NA     NA       NA        NA        NA         NA             NA
## 62    NA   NA     NA       NA        NA        NA         NA             NA
## 63    NA   NA     NA       NA        NA        NA         NA             NA
## 64    NA   NA     NA       NA        NA        NA         NA             NA
## 65    NA   NA     NA       NA        NA        NA         NA             NA
## 66    NA   NA     NA       NA        NA        NA         NA             NA
## 67    NA   NA     NA       NA        NA        NA         NA             NA
## 68    NA   NA     NA       NA        NA        NA         NA             NA
## 69    NA   NA     NA       NA        NA        NA         NA             NA
## 70    NA   NA     NA       NA        NA        NA         NA             NA
## 71    NA   NA     NA       NA        NA        NA         NA             NA
## 72    NA   NA     NA       NA        NA        NA         NA             NA
## 73    NA   NA     NA       NA        NA        NA         NA             NA
## 74    NA   NA     NA       NA        NA        NA         NA             NA
## 75    NA   NA     NA       NA        NA        NA         NA             NA
## 76    NA   NA     NA       NA        NA        NA         NA             NA
## 77    NA   NA     NA       NA        NA        NA         NA             NA
## 78    NA   NA     NA       NA        NA        NA         NA             NA
## 79    NA   NA     NA       NA        NA        NA         NA             NA
## 80    NA   NA     NA       NA        NA        NA         NA             NA
## 81    NA   NA     NA       NA        NA        NA         NA             NA
##    FemaleLabor Unemployment Energy Electricity Developed
## 1           NA           NA     NA          NA        NA
## 2           NA           NA     NA          NA        NA
## 3         75.6         11.9     NA          NA        NA
## 4           NA           NA     NA          NA        NA
## 5           NA           NA     NA          NA        NA
## 6         62.1          9.2   8673       10291         3
## 7         60.0          6.1     NA          NA        NA
## 8         69.7         12.3     NA          NA        NA
## 9           NA           NA     NA          NA        NA
## 10        63.8          7.3     NA          NA        NA
## 11        61.7          4.2    389         109         1
## 12        68.1         10.4    555         203         1
## 13        49.3          2.5    613         275         1
## 14          NA           NA  12651        4798         2
## 15        69.3          2.4   3915        6259         3
## 16        24.7         11.4    827        1683         1
## 17        43.7         22.5     NA          NA        NA
## 18          NA           NA     NA          NA        NA
## 19        52.9         12.0     NA          NA        NA
## 20        52.9          8.9     NA          NA        NA
## 21          NA           NA   5812        5693         3
## 22          NA           NA     NA          NA        NA
## 23        59.6          5.6     NA          NA         1
## 24        65.3          2.8   1970        6083         3
## 25        17.9         12.0   3060        3022         2
## 26          NA           NA     NA          NA        NA
## 27        81.4          3.3    475         602         1
## 28        59.4          3.8   5289       10497         3
## 29          NA           NA   1213        2804         2
## 30        51.6          7.2    650        1941         1
## 31        80.7          0.6     NA          NA        NA
## 32        73.5          2.0     NA          NA        NA
## 33          NA           NA     NA          NA        NA
## 34        51.7          1.6    369         215         1
## 35        65.9         13.6     NA          NA        NA
## 36        51.8         21.6   1262        3497         2
## 37          NA           NA     NA          NA        NA
## 38        39.9         11.4     NA          NA        NA
## 39          NA           NA     NA          NA        NA
## 40        66.4          6.8   2943        5137         3
## 41          NA           NA     NA          NA        NA
## 42        67.8         20.9     NA          NA        NA
## 43          NA           NA     NA          NA        NA
## 44        63.5         19.8     NA          NA        NA
## 45        12.9          8.1    577         974         1
## 46        25.6          3.0     NA          NA        NA
## 47          NA           NA     NA          NA        NA
## 48        66.8          3.9   6961       12994         3
## 49        52.0          8.4     NA        2719         2
## 50        64.6          8.4     NA          NA        NA
## 51        20.3         30.2     NA          NA        NA
## 52         6.2         12.9     NA         220         1
## 53          NA           NA     NA          NA        NA
## 54          NA           NA     NA          NA        NA
## 55          NA           NA     NA          NA        NA
## 56          NA           NA     NA          NA        NA
## 57          NA           NA     NA          NA        NA
## 58          NA           NA     NA          NA        NA
## 59          NA           NA     NA          NA        NA
## 60          NA           NA     NA          NA        NA
## 61          NA           NA     NA          NA        NA
## 62          NA           NA     NA          NA        NA
## 63          NA           NA     NA          NA        NA
## 64          NA           NA     NA          NA        NA
## 65          NA           NA     NA          NA        NA
## 66          NA           NA     NA          NA        NA
## 67          NA           NA     NA          NA        NA
## 68          NA           NA     NA          NA        NA
## 69          NA           NA     NA          NA        NA
## 70          NA           NA     NA          NA        NA
## 71          NA           NA     NA          NA        NA
## 72          NA           NA     NA          NA        NA
## 73          NA           NA     NA          NA        NA
## 74          NA           NA     NA          NA        NA
## 75          NA           NA     NA          NA        NA
## 76          NA           NA     NA          NA        NA
## 77          NA           NA     NA          NA        NA
## 78          NA           NA     NA          NA        NA
## 79          NA           NA     NA          NA        NA
## 80          NA           NA     NA          NA        NA
## 81          NA           NA     NA          NA        NA</code></pre>
<p>We'll create the life-expectancy plot, colored by continent.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>countries_inner) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">y=</span>LifeExpectancy, <span class="dt">x=</span>GDP, <span class="dt">size=</span>Population, <span class="dt">color =</span> Continent)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&#39;log2&#39;</span>)</code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-132-1.png" width="576" /></p>
</div>
<div id="practice-2.4.4" class="section level3 unnumbered">
<h3>Practice 2.4.4</h3>
<p>Continue working with the <code>Students</code> and <code>Costs</code> datasets.</p>
<div id="a-create-and-display-a-dataset-containing-all-courses-listed-in-costs-that-at-least-one-student-is-taking-along-with-the-cost-of-books-for-the-course." class="section level4">
<h4><span class="header-section-number">2.4.0.5</span> a) Create and display a dataset containing all courses, listed in <code>Costs</code> that at least one student is taking, along with the cost of books for the course.</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Type code here</span></code></pre></div>
</div>
<div id="b-create-and-display-a-dataset-listing-the-ids-of-all-students-who-are-taking-a-course-not-listed-in-costs-as-well-as-the-unlisted-course-they-are-taking." class="section level4">
<h4><span class="header-section-number">2.4.0.6</span> b) Create and display a dataset listing the id's of all students who are taking a course not listed in <code>Costs</code>, as well as the unlisted course they are taking.</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Type code here</span></code></pre></div>
</div>
</div>
</div>
<div id="strings-factors-and-dates" class="section level2">
<h2><span class="header-section-number">2.5</span> Strings, Factors and Dates</h2>
<div id="example-2.5.1-modifying-string-variables" class="section level3 unnumbered">
<h3>Example 2.5.1: Modifying String Variables</h3>
<p>We scrape the Milwaukee Bucks roster from ESPN.com</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rvest)
page &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;https://www.espn.com/nba/team/roster/_/name/mil&quot;</span>)
table &lt;-<span class="st"> </span>page <span class="op">%&gt;%</span>
<span class="kw">html_elements</span>(<span class="st">&quot;table&quot;</span>) <span class="op">%&gt;%</span>
<span class="kw">html_table</span>()
Bucks &lt;-<span class="st"> </span>table[[<span class="dv">1</span>]]
Bucks &lt;-<span class="st"> </span>Bucks <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>))
Bucks</code></pre></div>
<pre><code>## # A tibble: 18 x 7
##    Name                   POS     Age HT        WT      College       Salary    
##    &lt;chr&gt;                  &lt;chr&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;     
##  1 Grayson Allen7         SG       26 &quot;6&#39; 4\&quot;&quot;  198 lbs Duke          $4,054,695
##  2 Giannis Antetokounmpo… PF       27 &quot;6&#39; 11\&quot;&quot; 242 lbs --            $39,344,9…
##  3 Thanasis Antetokounmp… SF       29 &quot;6&#39; 6\&quot;&quot;  219 lbs --            $1,669,178
##  4 DeAndre&#39; Bembry95      SG       27 &quot;6&#39; 5\&quot;&quot;  210 lbs Saint Joseph… $1,669,178
##  5 Pat Connaughton24      SG       29 &quot;6&#39; 5\&quot;&quot;  209 lbs Notre Dame    $5,333,334
##  6 Jeff Dowtin15          PG       24 &quot;6&#39; 3\&quot;&quot;  177 lbs Rhode Island  --        
##  7 Langston Galloway12    SG       30 &quot;6&#39; 1\&quot;&quot;  200 lbs Saint Joseph… --        
##  8 George Hill3           PG       35 &quot;6&#39; 4\&quot;&quot;  188 lbs IUPUI         $4,000,000
##  9 Jrue Holiday21         PG       31 &quot;6&#39; 3\&quot;&quot;  205 lbs UCLA          $32,413,3…
## 10 Serge Ibaka25          C        32 &quot;6&#39; 10\&quot;&quot; 235 lbs --            $9,720,900
## 11 Brook Lopez11          C        33 &quot;7&#39; 0\&quot;&quot;  282 lbs Stanford      $13,302,3…
## 12 Sandro Mamukelashvili… PF       22 &quot;6&#39; 9\&quot;&quot;  240 lbs Seton Hall    --        
## 13 Wesley Matthews23      SG       35 &quot;6&#39; 4\&quot;&quot;  220 lbs Marquette     $1,237,494
## 14 Khris Middleton22      SF       30 &quot;6&#39; 7\&quot;&quot;  222 lbs Texas A&amp;M     $35,500,0…
## 15 Greg Monroe15          C        31 &quot;6&#39; 10\&quot;&quot; 250 lbs Georgetown    --        
## 16 Jordan Nwora13         SF       23 &quot;6&#39; 8\&quot;&quot;  225 lbs Louisville    $1,517,981
## 17 Bobby Portis9          C        27 &quot;6&#39; 10\&quot;&quot; 250 lbs Arkansas      $4,347,600
## 18 Lindell Wigginton28    G        23 &quot;6&#39; 1\&quot;&quot;  189 lbs Iowa State    --</code></pre>
<p>We'll perform several steps to clean the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Bucks &lt;-<span class="st"> </span>Bucks <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">HT =</span> <span class="kw">str_remove</span>(HT, <span class="st">&#39;&quot;&#39;</span>),             <span class="co"># remove &quot; from heights</span>
                 <span class="dt">WT =</span> <span class="kw">str_remove</span>(WT, <span class="st">&quot;lbs&quot;</span>),                    <span class="co"># remove &quot;lbs&quot; from weights</span>
                 <span class="dt">Salary =</span> <span class="kw">str_remove_all</span>(Salary, <span class="kw">c</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">$|,&quot;</span>)),   <span class="co"># remove $ and , from salary - put \\ in front of special chars.</span>
                 <span class="dt">College =</span> <span class="kw">str_replace</span>(College, <span class="st">&quot;--&quot;</span>, <span class="st">&quot;NA&quot;</span>),    <span class="co"># replace -- with NA for colleges</span>
                 <span class="dt">WT =</span> <span class="kw">as.numeric</span>(WT),                           <span class="co"># convert salaries and weights to numeric</span>
                 <span class="dt">Salary =</span> <span class="kw">as.numeric</span>(Salary),
                 <span class="dt">POS =</span> <span class="kw">as.factor</span>(POS)                           <span class="co"># convert positions to factor (categorical) variable</span>
                 )</code></pre></div>
<p>Now, we'll separate the player's uniform number from their name. In the notation in the <code>sep</code> operator, tells R to separate at the location in the string that lies between a lower case letter and a digit. The <code>?&gt;=</code> says &quot;this should be on the left&quot; and the <code>?=</code> says &quot;this should be on the right&quot;.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Bucks <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">separate</span>(Name, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;Name&quot;</span>, <span class="st">&quot;Number&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;(?&lt;=[a-z])(?=[0-9])&quot;</span>, <span class="dt">convert=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">separate</span>(HT, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;FT&quot;</span>, <span class="st">&quot;IN&quot;</span>), <span class="dt">convert=</span><span class="ot">TRUE</span>)    </code></pre></div>
<pre><code>## # A tibble: 18 x 9
##    Name               Number POS     Age    FT    IN    WT College        Salary
##    &lt;chr&gt;               &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
##  1 Grayson Allen           7 SG       26     6     4   198 Duke           4.05e6
##  2 Giannis Antetokou…     34 PF       27     6    11   242 NA             3.93e7
##  3 Thanasis Antetoko…     43 SF       29     6     6   219 NA             1.67e6
##  4 DeAndre&#39; Bembry        95 SG       27     6     5   210 Saint Joseph…  1.67e6
##  5 Pat Connaughton        24 SG       29     6     5   209 Notre Dame     5.33e6
##  6 Jeff Dowtin            15 PG       24     6     3   177 Rhode Island  NA     
##  7 Langston Galloway      12 SG       30     6     1   200 Saint Joseph… NA     
##  8 George Hill             3 PG       35     6     4   188 IUPUI          4.00e6
##  9 Jrue Holiday           21 PG       31     6     3   205 UCLA           3.24e7
## 10 Serge Ibaka            25 C        32     6    10   235 NA             9.72e6
## 11 Brook Lopez            11 C        33     7     0   282 Stanford       1.33e7
## 12 Sandro Mamukelash…     54 PF       22     6     9   240 Seton Hall    NA     
## 13 Wesley Matthews        23 SG       35     6     4   220 Marquette      1.24e6
## 14 Khris Middleton        22 SF       30     6     7   222 Texas A&amp;M      3.55e7
## 15 Greg Monroe            15 C        31     6    10   250 Georgetown    NA     
## 16 Jordan Nwora           13 SF       23     6     8   225 Louisville     1.52e6
## 17 Bobby Portis            9 C        27     6    10   250 Arkansas       4.35e6
## 18 Lindell Wigginton      28 G        23     6     1   189 Iowa State    NA</code></pre>
</div>
<div id="practice-2.5.2" class="section level3 unnumbered">
<h3>Practice 2.5.2:</h3>
<p>We'll load a dataset containing data on the 1000 highest grossing Hollwood movies of all time. Data come from Kaggle (<a href="https://www.kaggle.com/sanjeetsinghnaik/top-1000-highest-grossing-movies" class="uri">https://www.kaggle.com/sanjeetsinghnaik/top-1000-highest-grossing-movies</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Movies &lt;- read_csv(&quot;Highest_Hollywood_Grossing_Movies.csv&quot;)</span>
<span class="co">#head(Movies)</span></code></pre></div>
<p>Clean the data in the following ways:<br />
1) Create separate variables for year and title and remove any excess characters from each.<br />
2) Create a variable containing the release month<br />
3) Create separate variables called <code>hr</code> and one called <code>min</code> containing the hours and minutes of the film. Eliminate any excess characters, and ensure they are both numeric.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Type code here</span></code></pre></div>
</div>
<div id="example-2.5.3-working-with-factor-variables" class="section level3 unnumbered">
<h3>Example 2.5.3: Working with Factor Variables</h3>
<p>We load data from a sample of responses to the General Social survey, between 2000 and 2014.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;gss_cat&quot;</span>)
GSS &lt;-<span class="st"> </span>gss_cat
<span class="kw">head</span>(GSS)</code></pre></div>
<pre><code>## # A tibble: 6 x 9
##    year marital      age race  rincome    partyid     relig     denom    tvhours
##   &lt;int&gt; &lt;fct&gt;      &lt;int&gt; &lt;fct&gt; &lt;fct&gt;      &lt;fct&gt;       &lt;fct&gt;     &lt;fct&gt;      &lt;int&gt;
## 1  2000 Never mar…    26 White $8000 to … Ind,near r… Protesta… Souther…      12
## 2  2000 Divorced      48 White $8000 to … Not str re… Protesta… Baptist…      NA
## 3  2000 Widowed       67 White Not appli… Independent Protesta… No deno…       2
## 4  2000 Never mar…    39 White Not appli… Ind,near r… Orthodox… Not app…       4
## 5  2000 Divorced      25 White Not appli… Not str de… None      Not app…       1
## 6  2000 Married       25 White $20000 - … Strong dem… Protesta… Souther…      NA</code></pre>
<p>The <code>levels</code> command displays categories of a categorical variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(GSS<span class="op">$</span>partyid)</code></pre></div>
<pre><code>##  [1] &quot;No answer&quot;          &quot;Don&#39;t know&quot;         &quot;Other party&quot;       
##  [4] &quot;Strong republican&quot;  &quot;Not str republican&quot; &quot;Ind,near rep&quot;      
##  [7] &quot;Independent&quot;        &quot;Ind,near dem&quot;       &quot;Not str democrat&quot;  
## [10] &quot;Strong democrat&quot;</code></pre>
<p>The <code>count</code> command shows the number of people in each cetegory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GSS <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(partyid)</code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    partyid                n
##    &lt;fct&gt;              &lt;int&gt;
##  1 No answer            154
##  2 Don&#39;t know             1
##  3 Other party          393
##  4 Strong republican   2314
##  5 Not str republican  3032
##  6 Ind,near rep        1791
##  7 Independent         4119
##  8 Ind,near dem        2499
##  9 Not str democrat    3690
## 10 Strong democrat     3490</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GSS <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(relig)</code></pre></div>
<pre><code>## # A tibble: 15 x 2
##    relig                       n
##    &lt;fct&gt;                   &lt;int&gt;
##  1 No answer                  93
##  2 Don&#39;t know                 15
##  3 Inter-nondenominational   109
##  4 Native american            23
##  5 Christian                 689
##  6 Orthodox-christian         95
##  7 Moslem/islam              104
##  8 Other eastern              32
##  9 Hinduism                   71
## 10 Buddhism                  147
## 11 Other                     224
## 12 None                     3523
## 13 Jewish                    388
## 14 Catholic                 5124
## 15 Protestant              10846</code></pre>
<p>The <code>fct_recode</code> command allows us to change the names of the levels, or categories.</p>
<p>The <code>fct_lmp</code> function groups together categories that are not among the n most frequent, into a category called &quot;other&quot;.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GSS &lt;-<span class="st"> </span>GSS <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">partyid =</span> <span class="kw">fct_recode</span>(partyid,
    <span class="st">&quot;Republican, strong&quot;</span>    =<span class="st"> &quot;Strong republican&quot;</span>,
    <span class="st">&quot;Republican, weak&quot;</span>      =<span class="st"> &quot;Not str republican&quot;</span>,
    <span class="st">&quot;Independent, near rep&quot;</span> =<span class="st"> &quot;Ind,near rep&quot;</span>,
    <span class="st">&quot;Independent, near dem&quot;</span> =<span class="st"> &quot;Ind,near dem&quot;</span>,
    <span class="st">&quot;Democrat, weak&quot;</span>        =<span class="st"> &quot;Not str democrat&quot;</span>,
    <span class="st">&quot;Democrat, strong&quot;</span>      =<span class="st"> &quot;Strong democrat&quot;</span>,
    <span class="st">&quot;Other&quot;</span>                 =<span class="st"> &quot;No answer&quot;</span>,
    <span class="st">&quot;Other&quot;</span>                 =<span class="st"> &quot;Don&#39;t know&quot;</span>,
    <span class="st">&quot;Other&quot;</span>                 =<span class="st"> &quot;Other party&quot;</span>), 
    <span class="dt">relig =</span> <span class="kw">fct_lump</span>(relig, <span class="dt">n=</span><span class="dv">5</span>))
<span class="kw">head</span>(GSS)</code></pre></div>
<pre><code>## # A tibble: 6 x 9
##    year marital      age race  rincome    partyid       relig  denom     tvhours
##   &lt;int&gt; &lt;fct&gt;      &lt;int&gt; &lt;fct&gt; &lt;fct&gt;      &lt;fct&gt;         &lt;fct&gt;  &lt;fct&gt;       &lt;int&gt;
## 1  2000 Never mar…    26 White $8000 to … Independent,… Prote… Southern…      12
## 2  2000 Divorced      48 White $8000 to … Republican, … Prote… Baptist-…      NA
## 3  2000 Widowed       67 White Not appli… Independent   Prote… No denom…       2
## 4  2000 Never mar…    39 White Not appli… Independent,… Other  Not appl…       4
## 5  2000 Divorced      25 White Not appli… Democrat, we… None   Not appl…       1
## 6  2000 Married       25 White $20000 - … Democrat, st… Prote… Southern…      NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>GSS <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(partyid<span class="op">!=</span><span class="st">&quot;Other&quot;</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x=</span>relig, <span class="dt">fill=</span>partyid), <span class="dt">position=</span><span class="st">&quot;fill&quot;</span>)  </code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-145-1.png" width="576" /></p>
<div id="practice-2.5.4" class="section level4 unnumbered">
<h4>Practice 2.5.4</h4>
<p>Modify the <code>maritial</code> variable to indicate whether a person has ever been married. That is, Married, Widowed, Divorced, and Separated should all be listed as &quot;Yes&quot;, never married as &quot;No&quot;, and No Answer as NA.</p>
<p>Also, group the <code>denom</code> variable to include only the 10 most prevelant denominations, and classify people not belonging to those denominations as <code>other</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Type code here</span></code></pre></div>
</div>
</div>
<div id="example-2.5.5-dates-and-times" class="section level3 unnumbered">
<h3>Example 2.5.5: Dates and Times</h3>
<p>The <code>lubridate</code> package is useful for working with dates and times.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)</code></pre></div>
<p>We'll read in a .csv file containing columns of dates, listed in various formats, as well as a fictional number of sales on those days.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Dates &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;Dates.csv&#39;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Dates</code></pre></div>
<pre><code>##    X     DateA      DateB            DateC   DateD    DateE
## 1  1  1-Jan-18 2018-01-01  1/1/18 12:00 AM  1/1/18 20180101
## 2  2  7-Apr-19 2019-04-07   4/7/19 7:30 AM  4/7/19 20190407
## 3  3 13-Mar-19 2019-03-13 3/13/19 12:15 PM 3/13/19 20190313
## 4  4 18-May-20 2020-05-18  5/18/20 4:00 PM 5/18/20 20200518
## 5  5 15-Jul-21 2021-07-15 7/15/21 11:10 PM 7/15/21 20210715
## 6 NA                                                     NA
## 7 NA                                                     NA
## 8 NA                                                     NA
##                  DateF Sales
## 1   1/1/18 12:00:00 AM   137
## 2 4/7/2019  7:30:15 AM   266
## 3  3/13/19 12:15:36 PM   415
## 4   5/18/20 4:00:03 PM   326
## 5  7/15/21 11:10:53 PM   392
## 6                         NA
## 7                         NA
## 8                         NA</code></pre>
<p>When we try to plot these data, we get something nonsensical. Notice that R thinks of the column headings as character variables, not dates and times.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>Dates, <span class="kw">aes</span>(<span class="dt">x=</span>DateA, <span class="dt">y=</span>Sales)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-150-1.png" width="576" /></p>
<p>If we can get R to recognize the date columns as dates, it will be able to use them in meaningful ways, such as creating graphs.</p>
<p>We can tell R to treat a date-like variable as a date using the <code>dmy</code>, <code>ymd</code>, or <code>mdy</code> commands, in accordance with the order month, day, and year are given.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Dates &lt;-<span class="st"> </span>Dates <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">DateA =</span> <span class="kw">dmy</span>(DateA))
Dates</code></pre></div>
<pre><code>##    X      DateA      DateB            DateC   DateD    DateE
## 1  1 2018-01-01 2018-01-01  1/1/18 12:00 AM  1/1/18 20180101
## 2  2 2019-04-07 2019-04-07   4/7/19 7:30 AM  4/7/19 20190407
## 3  3 2019-03-13 2019-03-13 3/13/19 12:15 PM 3/13/19 20190313
## 4  4 2020-05-18 2020-05-18  5/18/20 4:00 PM 5/18/20 20200518
## 5  5 2021-07-15 2021-07-15 7/15/21 11:10 PM 7/15/21 20210715
## 6 NA       &lt;NA&gt;                                           NA
## 7 NA       &lt;NA&gt;                                           NA
## 8 NA       &lt;NA&gt;                                           NA
##                  DateF Sales
## 1   1/1/18 12:00:00 AM   137
## 2 4/7/2019  7:30:15 AM   266
## 3  3/13/19 12:15:36 PM   415
## 4   5/18/20 4:00:03 PM   326
## 5  7/15/21 11:10:53 PM   392
## 6                         NA
## 7                         NA
## 8                         NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>Dates, <span class="kw">aes</span>(<span class="dt">x=</span>DateA, <span class="dt">y=</span>Sales)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-152-1.png" width="576" /></p>
<p>We can also use commands like <code>dmy_hm</code> or <code>dmy_hms</code> when the variable contains hours, minutes, and seconds.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Dates &lt;-<span class="st"> </span>Dates <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">DateB =</span> <span class="kw">ymd</span>(DateB),
                          <span class="dt">DateC =</span> <span class="kw">mdy_hm</span>(DateC))
Dates</code></pre></div>
<pre><code>##    X      DateA      DateB               DateC   DateD    DateE
## 1  1 2018-01-01 2018-01-01 2018-01-01 00:00:00  1/1/18 20180101
## 2  2 2019-04-07 2019-04-07 2019-04-07 07:30:00  4/7/19 20190407
## 3  3 2019-03-13 2019-03-13 2019-03-13 12:15:00 3/13/19 20190313
## 4  4 2020-05-18 2020-05-18 2020-05-18 16:00:00 5/18/20 20200518
## 5  5 2021-07-15 2021-07-15 2021-07-15 23:10:00 7/15/21 20210715
## 6 NA       &lt;NA&gt;       &lt;NA&gt;                &lt;NA&gt;               NA
## 7 NA       &lt;NA&gt;       &lt;NA&gt;                &lt;NA&gt;               NA
## 8 NA       &lt;NA&gt;       &lt;NA&gt;                &lt;NA&gt;               NA
##                  DateF Sales
## 1   1/1/18 12:00:00 AM   137
## 2 4/7/2019  7:30:15 AM   266
## 3  3/13/19 12:15:36 PM   415
## 4   5/18/20 4:00:03 PM   326
## 5  7/15/21 11:10:53 PM   392
## 6                         NA
## 7                         NA
## 8                         NA</code></pre>
</div>
<div id="practice-2.5.6" class="section level3 unnumbered">
<h3>Practice 2.5.6</h3>
<p>Convert DateD, DateE, and DateF to appropriate date and/or time variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Type code here</span></code></pre></div>
</div>
<div id="example-2.5.7-creating-date-variable" class="section level3 unnumbered">
<h3>Example 2.5.7 Creating Date Variable</h3>
<p>We can combine columns to create a date.</p>
<p>The <code>nycflights13</code> package contains data on flights departing from New York City in 2013.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(nycflights13)
<span class="kw">head</span>(flights)</code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## 6  2013     1     1      554            558        -4      740            728
## # … with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>We'll combine year, month, day, hour, and minute into a single variable, called <code>departure</code>. We tell R to make this into a date and time variable using the <code>make_datetime</code> command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_dt &lt;-<span class="st"> </span>flights  <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">departure =</span> <span class="kw">make_datetime</span>(year, month, day, hour, minute))  
<span class="kw">head</span>(flights_dt)</code></pre></div>
<pre><code>## # A tibble: 6 x 20
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## 6  2013     1     1      554            558        -4      740            728
## # … with 12 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, departure &lt;dttm&gt;</code></pre>
<p>We plot number of departures by time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_dt <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(departure)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="dv">86400</span>) <span class="co"># 86400 seconds = 1 day</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-157-1.png" width="576" /></p>
<p>We plot number of departures on a single day, January 1, 2013 by time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_dt <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(departure <span class="op">&lt;</span><span class="st"> </span><span class="kw">ymd</span>(<span class="dv">20130102</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(departure)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="dv">600</span>) <span class="co"># 600 s = 10 minutes</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-158-1.png" width="576" /></p>
</div>
<div id="example-2.5.8-today-and-now" class="section level3 unnumbered">
<h3>Example 2.5.8 <code>today</code> and <code>now</code></h3>
<p>The <code>today</code> and <code>now</code> functions return the current date and time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">today</span>()</code></pre></div>
<pre><code>## [1] &quot;2022-02-25&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">now</span>()</code></pre></div>
<pre><code>## [1] &quot;2022-02-25 16:57:57 CST&quot;</code></pre>
<p>What happens if we convert between dates and times?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_datetime</span>(<span class="kw">today</span>())</code></pre></div>
<pre><code>## [1] &quot;2022-02-25 UTC&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_date</span>(<span class="kw">now</span>())</code></pre></div>
<pre><code>## [1] &quot;2022-02-25&quot;</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-visualization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="shiny-apps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DSP-LU-W22/DSP-W22-Notes/edit/master/02-Data_Wrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/DSP-LU-W22/DSP-W22-Notes/blob/master/02-Data_Wrangling.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
